<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Google Play å…ç¨è®¾ç½®</title>
      <link href="/posts/43832024/"/>
      <url>/posts/43832024/</url>
      
        <content type="html"><![CDATA[<p>æŒ‰ç…§ç½‘ä¸Šçš„è¯´æ³•ï¼Œç¾å›½åœ°åŒºæœ‰5ä¸ªå…ç¨å·ï¼Œä¿„å‹’å†ˆOregonã€ç‰¹æ‹‰åå·Delawareã€é˜¿æ‹‰æ–¯åŠ Alaskaã€è’™å¤§æ‹¿Montanaã€æ–°ç½•å¸ƒå°”ä»€å·New Hampshelloreã€‚å…¶ä¸­é˜¿æ‹‰æ–¯åŠ å·éƒ¨åˆ†åŸå¸‚æ˜¯ä¸å…ç¨çš„ã€‚</p><p>æˆ‘ç”¨ä¿¡ç”¨å¡ç»‘ Google Play çš„æ—¶å€™ï¼Œå¡«çš„è´¦å•åœ°å€æ˜¯é˜¿æ‹‰æ–¯åŠ å·çš„åœ°å€ï¼Œä½†æ˜¯åœ¨è´­ä¹° APP çš„æ—¶å€™è¿˜æ˜¯æ”¶äº†å¤§æ¦‚ 0.4% çš„é”€å”®ç¨ï¼Œæˆ‘åˆæŸ¥äº†ä¸€ä¸‹<a href="https://support.google.com/googleplay/answer/2850368">Google Play å¾æ”¶é”€å”®ç¨çš„åœ°åŒº</a>ï¼Œäºæ˜¯åˆé‡æ–°ä¿®æ”¹äº†ä¸€ä¸‹ä¿¡ç”¨å¡çš„è´¦å•åœ°å€ï¼Œå‘ç°è¿˜æ˜¯ä¼šæ”¶å–ç¨è´¹ğŸ˜¡ã€‚æŠ˜è…¾äº†å¥½ä¹…ï¼Œè§£å†³æ–¹æ³•æ˜¯åœ¨ <a href="https://payments.google.com/payments/home#paymentMethods">Google ä»˜æ¬¾ä¸­å¿ƒ</a>çš„ä¸‰ä¸ªåœ°æ–¹è®¾ç½®<a href="https://www.fakepersongenerator.com/Index/generate">å…ç¨åœ°å€</a>ï¼Œå¹¶ä¸”è¿™<strong>ä¸‰ä¸ªåœ°å€è¦ä¿æŒä¸€è‡´</strong>ï¼š</p><ul><li><a href="https://payments.google.com/gp/w/home/paymentmethods">ä»˜æ¬¾æ–¹å¼</a>ï¼šä¿®æ”¹ä¿¡ç”¨å¡è´¦å•åœ°å€</li><li><a href="https://payments.google.com/gp/w/home/addressbook">åœ°å€</a>ï¼šåªä¿ç•™ä¸€ä¸ªåœ°å€</li><li><a href="https://payments.google.com/gp/w/home/settings">è®¾ç½®</a>ï¼šä»˜æ¬¾èµ„æ–™-&gt;åœ°å€</li></ul><p>è®¾ç½®å®Œæˆä¹‹åï¼ŒGooge Play æ¸…ä¸€ä¸‹ç¼“å­˜é‡æ–°è¿›å…¥ï¼Œä»˜æ¬¾çš„æ—¶å€™å°±å…ç¨äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> çŸ¥é“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google Play </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤–è§‚æ¨¡å¼</title>
      <link href="/posts/3a68f720/"/>
      <url>/posts/3a68f720/</url>
      
        <content type="html"><![CDATA[<p><img src="/../img/design-pattern-facade.png" alt="adapter"></p><p>å¤–è§‚è®¾è®¡æ¨¡å¼ä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ç»Ÿä¸€æ¥å£ã€‚æ­¤æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªæ›´é«˜çº§åˆ«çš„æ¥å£ï¼Œä½¿å­ç³»ç»Ÿæ›´æ˜“äºä½¿ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€‚é…å™¨æ¨¡å¼</title>
      <link href="/posts/4c74d875/"/>
      <url>/posts/4c74d875/</url>
      
        <content type="html"><![CDATA[<p><img src="/../img/design-pattern-adapter.png" alt="adapter"></p><p>å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ã€‚é€‚é…å™¨æ¨¡å¼ä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ASP.NET Core å­¦ä¹ ï¼ˆä¸€ï¼‰</title>
      <link href="/posts/f44d4d94/"/>
      <url>/posts/f44d4d94/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨å¾®è½¯çš„ outlook å‘é€é‚®ä»¶æ—¶æŠ¥é”™</title>
      <link href="/posts/e39b176c/"/>
      <url>/posts/e39b176c/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨ .net è‡ªå¸¦çš„ SmtpClient å‘é€é‚®ä»¶çš„æ—¶å€™æŠ¥é”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unhandled exception. System.Net.Mail.SmtpException: The SMTP server requires a secure connection or the client was not authenticated. The server response was: 5.7.57 Client not authenticated to send mail. Error: 535 5.7.139 Authentication unsuccessful, the user credentials were incorrect.</span><br></pre></td></tr></table></figure><p>å¦‚æœç¡®è®¤è´¦å·å¯†ç å¡«å†™æ­£ç¡®ï¼Œå¹¶ä¸” SMTP æœåŠ¡å™¨åœ°å€ä¹Ÿå¡«å†™æ­£ç¡®ï¼Œå¹¶ä¸” outlook è®¾ç½®é‡Œçš„ â€œå…è®¸è®¾å¤‡å’Œåº”ç”¨ä½¿ç”¨POPâ€ é€‰é¡¹å·²ç»æ‰“å¼€ã€‚é‚£æœ‰å¯èƒ½æ˜¯å¾®è½¯è´¦å·å¼€å¯äº†å¤šé‡èº«ä»½éªŒè¯ (MFA)ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨åº”ç”¨å¯†ç è€Œä¸æ˜¯æ™®é€šå¯†ç æ¥è¿›è¡Œ SMTP èº«ä»½éªŒè¯ã€‚</p><p>å»å¾®è½¯è´¦æˆ·çš„ç®¡ç†åå°åˆ›å»ºä¸€ä¸ªåº”ç”¨å¯†ç ï¼š<a href="https://account.live.com/proofs/Manage/additional?mkt=zh-cn">https://account.live.com/proofs/Manage/additional?mkt=zh-cn</a></p>]]></content>
      
      
      <categories>
          
          <category> çŸ¥é“ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Go è¯­è¨€ä¸­çš„æµ…æ‹·è´å’Œæ·±æ‹·è´</title>
      <link href="/posts/9c9c65a4/"/>
      <url>/posts/9c9c65a4/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯æµ…æ‹·è´ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æµ…æ‹·è´ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æµ…æ‹·è´ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æµ…æ‹·è´ï¼Ÿ</h3><p>æµ…æ‹·è´çš„æ„æ€æ˜¯ï¼Œåªå¤åˆ¶ç»“æ„ä½“çš„é¡¶å±‚å­—æ®µï¼Œè€Œä¸å¤åˆ¶å®ƒä»¬æŒ‡å‘çš„åº•å±‚æ•°æ®ã€‚å¦‚æœç»“æ„ä½“ä¸­æœ‰æŒ‡é’ˆæˆ–å¼•ç”¨ç±»å‹çš„å­—æ®µï¼Œä¾‹å¦‚åˆ‡ç‰‡ã€æ˜ å°„æˆ–é€šé“ï¼Œé‚£ä¹ˆå¤åˆ¶åçš„å˜é‡ä¼šå…±äº«è¿™äº›å­—æ®µçš„åº•å±‚æ•°æ®ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„å‰¯æœ¬ã€‚</p><p>å½“ä½¿ç”¨èµ‹å€¼è¿ç®—ç¬¦å°†ä¸€ä¸ªç»“æ„ä½“å˜é‡å¤åˆ¶ç»™å¦ä¸€ä¸ªç»“æ„ä½“å˜é‡æ—¶ï¼Œä¼šå‘ç”Ÿæµ…æ‹·è´ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestShadowCopy</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"><span class="keyword">type</span> Car <span class="keyword">struct</span> &#123;</span><br><span class="line">Brand  <span class="type">string</span></span><br><span class="line">Model  <span class="type">string</span></span><br><span class="line">Owners []<span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">car1 := Car&#123;Brand: <span class="string">&quot;Tesla&quot;</span>, Model: <span class="string">&quot;Model X&quot;</span>, Owners: []<span class="type">string</span>&#123;<span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Bob&quot;</span>&#125;&#125;</span><br><span class="line">car2 := car1 <span class="comment">// Shadow copy</span></span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">&quot;car1.Owners çš„åœ°å€: %p, car2.Owners çš„åœ°å€: %p\n&quot;</span>, &amp;car1.Owners, &amp;car2.Owners)</span><br><span class="line">fmt.Printf(<span class="string">&quot;car1.Owners æŒ‡å‘çš„åˆ‡ç‰‡æŒ‡é’ˆ: %p, car2.Owners æŒ‡å‘çš„åˆ‡ç‰‡æŒ‡é’ˆ: %p\n&quot;</span>, car1.Owners, car2.Owners)</span><br><span class="line"></span><br><span class="line"><span class="comment">// change index 0 of &#x27;Owners&#x27; from copy</span></span><br><span class="line">car2.Owners[<span class="number">0</span>] = <span class="string">&quot;John&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// the Owners from car1 was changed too</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;car1 :%v,\nCar2: %v\n&quot;</span>, car1, car2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">=== RUN   TestShadowCopy</span><br><span class="line">car1.Owners çš„åœ°å€: 0xc0000a0ce0, car2.Owners çš„åœ°å€: 0xc0000a0d20</span><br><span class="line">car1.Owners æŒ‡å‘çš„åˆ‡ç‰‡æŒ‡é’ˆ: 0xc000098700, car2.Owners æŒ‡å‘çš„åˆ‡ç‰‡æŒ‡é’ˆ: 0xc000098700</span><br><span class="line">car1: &#123;Tesla Model X [John Bob]&#125;,</span><br><span class="line">car2: &#123;Tesla Model X [John Bob]&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œcar1 å’Œ car2 æ˜¯ä¸¤ä¸ªä¸åŒçš„ç»“æ„ä½“å˜é‡ï¼Œæ‰€ä»¥ car1.Owners å’Œ car2.Owners çš„åœ°å€ä¸åŒï¼Œä½†ç”±äº car1.Owners æ˜¯åˆ‡ç‰‡ç±»å‹ï¼Œèµ‹å€¼çš„æ—¶å€™å‘ç”Ÿäº†æµ…æ‹·è´ï¼Œæ‰€ä»¥ car1.Owners å’Œ car2.Owners æŒ‡å‘äº†åŒä¸€ä¸ªåˆ‡ç‰‡ï¼Œå¯¹ car1.Owners æˆ– car2.Owners çš„ä¿®æ”¹å®é™…ä¸Šä¿®æ”¹çš„æ˜¯åŒä¸€ä¸ªåˆ‡ç‰‡ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯æ·±æ‹·è´ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ·±æ‹·è´ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ·±æ‹·è´ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ·±æ‹·è´ï¼Ÿ</h3><p>æ·±æ‹·è´çš„æ„æ€æ˜¯åˆ›å»ºå˜é‡çš„æ–°å®ä¾‹å¹¶å¤åˆ¶æ‰€æœ‰å†…éƒ¨å…ƒç´ ï¼Œæ— è®ºå®ƒä»¬åœ¨æ•°æ®ç»“æ„ä¸­çš„â€œæ·±åº¦â€å¦‚ä½•ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestDeepCopy</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"><span class="keyword">type</span> Car <span class="keyword">struct</span> &#123;</span><br><span class="line">Brand  <span class="type">string</span></span><br><span class="line">Model  <span class="type">string</span></span><br><span class="line">Owners []<span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// deepCopyCar performs a deep copy from src to dest.</span></span><br><span class="line">deepCopyCar := <span class="function"><span class="keyword">func</span><span class="params">(src, dest *Car)</span></span> &#123;</span><br><span class="line">dest.Brand = src.Brand</span><br><span class="line">dest.Model = src.Model</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create a new slice with its own underlying array</span></span><br><span class="line">dest.Owners = <span class="built_in">make</span>([]<span class="type">string</span>, <span class="built_in">len</span>(src.Owners))</span><br><span class="line"></span><br><span class="line"><span class="comment">// Copy the content of the original slice to the new slice</span></span><br><span class="line"><span class="built_in">copy</span>(dest.Owners, src.Owners)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">car1 := Car&#123;Brand: <span class="string">&quot;Tesla&quot;</span>, Model: <span class="string">&quot;Model X&quot;</span>, Owners: []<span class="type">string</span>&#123;<span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Bob&quot;</span>&#125;&#125;</span><br><span class="line"><span class="keyword">var</span> car2 Car</span><br><span class="line"></span><br><span class="line"><span class="comment">// Perform the manual deep copy</span></span><br><span class="line">deepCopyCar(&amp;car1, &amp;car2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Modify the first index of the &quot;Owners&quot; slice in car2</span></span><br><span class="line">car2.Owners[<span class="number">0</span>] = <span class="string">&quot;John&quot;</span></span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">&quot;Car1: %v\nCar2: %v\n&quot;</span>, car1, car2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">=== RUN   TestDeepCopy</span><br><span class="line">car1: &#123;Tesla Model X [Alice Bob]&#125;</span><br><span class="line">car2: &#123;Tesla Model X [John Bob]&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡æ·±æ‹·è´çš„æ–¹å¼åˆ›å»ºçš„ car2ï¼Œå¯¹ car2 çš„ä¿®æ”¹å¹¶ä¸ä¼šå½±å“åˆ° car1ã€‚</p><h3 id="ä½•æ—¶ç”¨æµ…æ‹·è´ï¼Ÿä½•æ—¶ç”¨æ·±æ‹·è´ï¼Ÿ"><a href="#ä½•æ—¶ç”¨æµ…æ‹·è´ï¼Ÿä½•æ—¶ç”¨æ·±æ‹·è´ï¼Ÿ" class="headerlink" title="ä½•æ—¶ç”¨æµ…æ‹·è´ï¼Ÿä½•æ—¶ç”¨æ·±æ‹·è´ï¼Ÿ"></a>ä½•æ—¶ç”¨æµ…æ‹·è´ï¼Ÿä½•æ—¶ç”¨æ·±æ‹·è´ï¼Ÿ</h3><p>å½“ä¸éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ›´æ”¹æ—¶ï¼Œç”¨æµ…æ‹·è´ï¼ŒèŠ‚çœCPUæ—¶é—´å’Œå†…å­˜ã€‚</p><p>å½“ä½ éœ€è¦æ•°æ®çš„å®Œæ•´ä¸”ç‹¬ç«‹çš„å‰¯æœ¬æ—¶ï¼Œç”¨æ·±æ‹·è´ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github ç½‘ç»œé—®é¢˜</title>
      <link href="/posts/e8bf53bc/"/>
      <url>/posts/e8bf53bc/</url>
      
        <content type="html"><![CDATA[<p><strong>ç›´æ¥åœ¨ <code>~/.ssh/config</code> ä¸­æ— è„‘é…ç½®ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">    HostName ssh.github.com</span><br><span class="line">    User git</span><br><span class="line">    Port 443</span><br><span class="line">    ProxyCommand &#x27;C:\Program Files\Git\mingw64\bin\connect.exe&#x27; -S 127.0.0.1:7890 %h %p # Windows</span><br><span class="line">    ProxyCommand nc -v -x 127.0.0.1:7890 %h %p # macOS</span><br></pre></td></tr></table></figure><p>over.</p>]]></content>
      
      
      <categories>
          
          <category> çŸ¥é“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Github </tag>
            
            <tag> proxy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å»ºé€ è€…æ¨¡å¼</title>
      <link href="/posts/fe816c3c/"/>
      <url>/posts/fe816c3c/</url>
      
        <content type="html"><![CDATA[<p><img src="/../img/design-pattern-builder.png" alt="builder"></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Product</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125; = <span class="built_in">string</span>.Empty;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Description &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125; = <span class="built_in">string</span>.Empty;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Builder</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Builder <span class="title">BuildHeader</span>()</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Builder <span class="title">BuildBody</span>()</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Builder <span class="title">BuildFooter</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CatBuilder</span> : <span class="title">Builder</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> Builder <span class="title">BuildBody</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NotImplementedException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> Builder <span class="title">BuildFooter</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NotImplementedException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> Builder <span class="title">BuildHeader</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NotImplementedException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DogBuilder</span> : <span class="title">Builder</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> Builder <span class="title">BuildBody</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NotImplementedException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> Builder <span class="title">BuildFooter</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NotImplementedException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> Builder <span class="title">BuildHeader</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NotImplementedException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Director</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Construct</span>(<span class="params">Builder builder</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        builder</span><br><span class="line">            .BuildHeader()</span><br><span class="line">            .BuildBody()</span><br><span class="line">            .BuildFooter();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç­–ç•¥æ¨¡å¼</title>
      <link href="/posts/72e3b671/"/>
      <url>/posts/72e3b671/</url>
      
        <content type="html"><![CDATA[<p><img src="/../img/design-pattern-strategy.png" alt="strategy"></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŠ½è±¡å·¥å‚æ¨¡å¼</title>
      <link href="/posts/9b7d6e62/"/>
      <url>/posts/9b7d6e62/</url>
      
        <content type="html"><![CDATA[<p>è‹¹æœå…¬å¸ç”Ÿäº§æ‰‹æœºå’Œç”µè„‘ï¼Œå°ç±³å…¬å¸ä¹Ÿç”Ÿäº§æ‰‹æœºå’Œç”µè„‘ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼å°±æ˜¯è¦æŠ½è±¡è¿™é‡Œçš„å…¬å¸å’Œäº§å“ï¼Œå¤–éƒ¨è°ƒç”¨æŠ½è±¡å·¥å‚å®¢æˆ·ç«¯çš„æ—¶å€™åªéœ€æŒ‡å®šä¸€ä¸ªå·¥å‚ï¼Œæ— éœ€æŒ‡å®šå…·ä½“çš„äº§å“ã€‚</p><p>æŠ½è±¡å·¥å‚æ¨¡å¼åŒ…å«ï¼šæŠ½è±¡çš„å·¥å‚ï¼Œå…·ä½“çš„å·¥å‚ï¼ŒæŠ½è±¡çš„äº§å“ï¼Œå…·ä½“çš„äº§å“ï¼Œæä¾›ç»™å¤–éƒ¨ä½¿ç”¨çš„å®¢æˆ·ç«¯ã€‚</p><p><img src="/img/design-pattern-abstract-factory.png" alt="design-pattern-abstract-factory"></p><h3 id="æŠ½è±¡çš„å·¥å‚"><a href="#æŠ½è±¡çš„å·¥å‚" class="headerlink" title="æŠ½è±¡çš„å·¥å‚"></a>æŠ½è±¡çš„å·¥å‚</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AbstractFactory æŠ½è±¡çš„å…¬å¸ç”Ÿäº§æŠ½è±¡çš„äº§å“</span></span><br><span class="line"><span class="keyword">type</span> AbstractFactory <span class="keyword">interface</span> &#123;</span><br><span class="line">CreatePhone() AbstractPhone</span><br><span class="line">CreateComputer() AbstractComputer</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…·ä½“çš„å·¥å‚"><a href="#å…·ä½“çš„å·¥å‚" class="headerlink" title="å…·ä½“çš„å·¥å‚"></a>å…·ä½“çš„å·¥å‚</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _ AbstractFactory = (*AppleFactory)(<span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">var</span> _ AbstractFactory = (*MiFactory)(<span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> AppleFactory <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewAppleFactory</span><span class="params">()</span></span> AbstractFactory                   &#123; <span class="keyword">return</span> &amp;AppleFactory&#123;&#125; &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *AppleFactory)</span></span> CreatePhone() AbstractPhone       &#123; <span class="keyword">return</span> &amp;IPhone&#123;&#125; &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *AppleFactory)</span></span> CreateComputer() AbstractComputer &#123; <span class="keyword">return</span> &amp;MacBook&#123;&#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MiFactory <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewMiFactory</span><span class="params">()</span></span> AbstractFactory                   &#123; <span class="keyword">return</span> &amp;MiFactory&#123;&#125; &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *MiFactory)</span></span> CreatePhone() AbstractPhone       &#123; <span class="keyword">return</span> &amp;MiPhone&#123;&#125; &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *MiFactory)</span></span> CreateComputer() AbstractComputer &#123; <span class="keyword">return</span> &amp;MiBook&#123;&#125; &#125;</span><br></pre></td></tr></table></figure><h3 id="æŠ½è±¡çš„äº§å“"><a href="#æŠ½è±¡çš„äº§å“" class="headerlink" title="æŠ½è±¡çš„äº§å“"></a>æŠ½è±¡çš„äº§å“</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AbstractPhone æ‰‹æœºå¯ä»¥æ‰“ç”µè¯ã€çœ‹Bç«™</span></span><br><span class="line"><span class="keyword">type</span> AbstractPhone <span class="keyword">interface</span> &#123;</span><br><span class="line">Call()</span><br><span class="line">Bilibili()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// AbstractComputer ç”µè„‘å¯ä»¥å†™ä»£ç ã€ç©æ‹çˆ±å†’é™©æ¸¸æˆ</span></span><br><span class="line"><span class="keyword">type</span> AbstractComputer <span class="keyword">interface</span> &#123;</span><br><span class="line">Code()</span><br><span class="line">PlayGalgame()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…·ä½“çš„äº§å“"><a href="#å…·ä½“çš„äº§å“" class="headerlink" title="å…·ä½“çš„äº§å“"></a>å…·ä½“çš„äº§å“</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _ AbstractPhone = (*IPhone)(<span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">var</span> _ AbstractPhone = (*MiPhone)(<span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> IPhone <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *IPhone)</span></span> Call()     &#123; log.Println(<span class="string">&quot;iphone call me&quot;</span>) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *IPhone)</span></span> Bilibili() &#123; log.Println(<span class="string">&quot;iphone watching bilibili&quot;</span>) &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MiPhone <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *MiPhone)</span></span> Call()     &#123; log.Println(<span class="string">&quot;mi phone call me&quot;</span>) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *MiPhone)</span></span> Bilibili() &#123; log.Println(<span class="string">&quot;mi phone watching bilibili&quot;</span>) &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _ AbstractComputer = (*MacBook)(<span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">var</span> _ AbstractComputer = (*MiBook)(<span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MiBook <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *MiBook)</span></span> Code()        &#123; log.Println(<span class="string">&quot;mibook wrote a bug&quot;</span>) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *MiBook)</span></span> PlayGalgame() &#123; log.Println(<span class="string">&quot;mibook playing galgame&quot;</span>) &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MacBook <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *MacBook)</span></span> Code()        &#123; log.Println(<span class="string">&quot;macbook wrote a bug&quot;</span>) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *MacBook)</span></span> PlayGalgame() &#123; log.Println(<span class="string">&quot;macbook can&#x27;t play galgame, shit!&quot;</span>) &#125;</span><br></pre></td></tr></table></figure><h3 id="æä¾›ç»™å¤–éƒ¨ä½¿ç”¨çš„å®¢æˆ·ç«¯"><a href="#æä¾›ç»™å¤–éƒ¨ä½¿ç”¨çš„å®¢æˆ·ç«¯" class="headerlink" title="æä¾›ç»™å¤–éƒ¨ä½¿ç”¨çš„å®¢æˆ·ç«¯"></a>æä¾›ç»™å¤–éƒ¨ä½¿ç”¨çš„å®¢æˆ·ç«¯</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> FactoryClient <span class="keyword">struct</span> &#123;</span><br><span class="line">Phone    AbstractPhone</span><br><span class="line">Computer AbstractComputer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewFactoryClient</span><span class="params">(factory AbstractFactory)</span></span> *FactoryClient &#123;</span><br><span class="line"><span class="keyword">return</span> &amp;FactoryClient&#123;Phone: factory.CreatePhone(), Computer: factory.CreateComputer()&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤–éƒ¨è°ƒç”¨"><a href="#å¤–éƒ¨è°ƒç”¨" class="headerlink" title="å¤–éƒ¨è°ƒç”¨"></a>å¤–éƒ¨è°ƒç”¨</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestNewFactoryClient</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">appleFactory := NewAppleFactory()</span><br><span class="line">factoryClient := NewFactoryClient(appleFactory)</span><br><span class="line">factoryClient.Phone.Call()</span><br><span class="line">factoryClient.Phone.Bilibili()</span><br><span class="line">factoryClient.Computer.Code()</span><br><span class="line">factoryClient.Computer.PlayGalgame()</span><br><span class="line">t.Log(<span class="string">&quot;---&quot;</span>)</span><br><span class="line">miFactory := NewMiFactory()</span><br><span class="line">factoryClient = NewFactoryClient(miFactory)</span><br><span class="line">factoryClient.Phone.Call()</span><br><span class="line">factoryClient.Phone.Bilibili()</span><br><span class="line">factoryClient.Computer.Code()</span><br><span class="line">factoryClient.Computer.PlayGalgame()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">iphone call me</span><br><span class="line">iphone watching bilibili</span><br><span class="line">macbook wrote a bug</span><br><span class="line">macbook can&#x27;t play galgame, shit!</span><br><span class="line">---</span><br><span class="line">mi phone call me</span><br><span class="line">mi phone watching bilibili</span><br><span class="line">mibook wrote a bug</span><br><span class="line">mibook playing galgame</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
            <tag> Golang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.Netå­¦ä¹ </title>
      <link href="/posts/38ea7f4b/"/>
      <url>/posts/38ea7f4b/</url>
      
        <content type="html"><![CDATA[<h2 id="æ„é€ å‡½æ•°å’Œåˆå§‹åŒ–"><a href="#æ„é€ å‡½æ•°å’Œåˆå§‹åŒ–" class="headerlink" title="æ„é€ å‡½æ•°å’Œåˆå§‹åŒ–"></a>æ„é€ å‡½æ•°å’Œåˆå§‹åŒ–</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. é»˜è®¤å€¼åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">// é€šå¸¸ï¼Œå¯¹äºæ•°å­—ç±»å‹ï¼Œè¯¥å€¼ä¸º 0ï¼Œå¯¹äºæ‰€æœ‰å¼•ç”¨ç±»å‹ï¼Œè¯¥å€¼ä¸º null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. å­—æ®µåˆå§‹åŒ–è¡¨è¾¾å¼è®¾ç½®åˆå§‹å€¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Container</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Initialize capacity field to a default value of 10:</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> _capacity = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. æ„é€ å‡½æ•°å‚æ•°åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Container</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> _capacity;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Container</span>(<span class="params"><span class="built_in">int</span> capacity</span>)</span> =&gt; _capacity = capacity;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Container</span>(<span class="params"><span class="built_in">int</span> capacity</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> _capacity = capacity;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. è°ƒç”¨æ–¹ä½¿ç”¨å¯¹è±¡åˆå§‹å€¼è®¾å®šé¡¹æ¥è®¾ç½®è¯¥å±æ€§çš„åˆå§‹å€¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> required <span class="built_in">string</span> LastName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> required <span class="built_in">string</span> FirstName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(); <span class="comment">// Error! Required properties not set</span></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person() &#123; FirstName = <span class="string">&quot;Grace&quot;</span>, LastName = <span class="string">&quot;Hopper&quot;</span> &#125;;</span><br></pre></td></tr></table></figure><h2 id="é™æ€ç±»å’Œé™æ€ç±»æˆå‘˜"><a href="#é™æ€ç±»å’Œé™æ€ç±»æˆå‘˜" class="headerlink" title="é™æ€ç±»å’Œé™æ€ç±»æˆå‘˜"></a>é™æ€ç±»å’Œé™æ€ç±»æˆå‘˜</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é™æ€ç±»æ— æ³•å®ä¾‹åŒ–ã€‚ ç”±äºä¸å­˜åœ¨ä»»ä½•å®ä¾‹å˜é‡ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ç±»åæœ¬èº«è®¿é—®é™æ€ç±»çš„æˆå‘˜ã€‚</span></span><br><span class="line">UtilityClass.MethodA();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é™æ€å­—æ®µçš„ä¸¤ä¸ªå¸¸è§ç”¨é€”æ˜¯ä¿ç•™å·²å®ä¾‹åŒ–çš„å¯¹è±¡æ•°çš„è®¡æ•°ï¼Œæˆ–æ˜¯å­˜å‚¨å¿…é¡»åœ¨æ‰€æœ‰å®ä¾‹é—´å…±äº«çš„å€¼ã€‚</span></span><br><span class="line"><span class="comment">// é™æ€æ–¹æ³•å¯ä»¥è¿›è¡Œé‡è½½ï¼Œä½†ä¸èƒ½è¿›è¡Œæ›¿ä»£ï¼Œå› ä¸ºå®ƒä»¬å±äºç±»ï¼Œè€Œä¸å±äºç±»çš„ä»»ä½•å®ä¾‹ã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœç±»åŒ…å«é™æ€å­—æ®µï¼Œåˆ™æä¾›åœ¨ç±»åŠ è½½æ—¶åˆå§‹åŒ–å®ƒä»¬çš„é™æ€æ„é€ å‡½æ•°ã€‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Automobile</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> NumberOfWheels = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> SizeOfGasTank</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">15</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Drive</span>()</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">event</span> EventType? RunOutOfGas;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Other non-static fields and properties...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¸é‡ä½¿ç”¨ const ä¿®é¥°ç¬¦å£°æ˜ã€‚ ä»… C# å†…ç½®ç±»å‹ï¼ˆä¸åŒ…æ‹¬ System.Objectï¼‰å¯å£°æ˜ä¸º constã€‚</span></span><br><span class="line"><span class="comment">// ç”¨æˆ·å®šä¹‰çš„ç±»å‹ï¼ˆåŒ…æ‹¬ç±»ã€ç»“æ„å’Œæ•°ç»„ï¼‰ä¸èƒ½ä¸º constã€‚ </span></span><br><span class="line"><span class="keyword">class</span> <span class="title">Calendar1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> Months = <span class="number">12</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title">Constants</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">double</span> Pi = <span class="number">3.14159</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> SpeedOfLight = <span class="number">300000</span>; <span class="comment">// km per sec.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">double</span> radius = <span class="number">5.3</span>;</span><br><span class="line">        <span class="built_in">double</span> area = Constants.Pi * (radius * radius);</span><br><span class="line">        <span class="built_in">int</span> secsFromSun = <span class="number">149476000</span> / Constants.SpeedOfLight; <span class="comment">// in km</span></span><br><span class="line">        Console.WriteLine(secsFromSun);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ readonly ä¿®é¥°ç¬¦åˆ›å»ºåœ¨è¿è¡Œæ—¶ä¸€æ¬¡æ€§ï¼ˆä¾‹å¦‚åœ¨æ„é€ å‡½æ•°ä¸­ï¼‰åˆå§‹åŒ–çš„ç±»ã€ç»“æ„æˆ–æ•°ç»„ï¼Œæ­¤åä¸èƒ½æ›´æ”¹ã€‚</span></span><br></pre></td></tr></table></figure><h2 id="ç©ºå€¼"><a href="#ç©ºå€¼" class="headerlink" title="ç©ºå€¼"></a>ç©ºå€¼</h2><p>å¯ä¸º null å€¼ç±»å‹ T? è¡¨ç¤ºå…¶åŸºç¡€å€¼ç±»å‹ T çš„æ‰€æœ‰å€¼åŠé¢å¤–çš„ null å€¼ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥å°†ä»¥ä¸‹ä¸‰ä¸ªå€¼ä¸­çš„ä»»æ„ä¸€ä¸ªæŒ‡å®šç»™ bool? å˜é‡ï¼štrueã€false æˆ– nullã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">double</span>? pi = <span class="number">3.14</span>;</span><br><span class="line"><span class="built_in">char</span>? letter = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> m2 = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">int</span>? m = m2;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span>? flag = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// An array of a nullable value type:</span></span><br><span class="line"><span class="built_in">int</span>?[] arr = <span class="keyword">new</span> <span class="built_in">int</span>?[<span class="number">10</span>];</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥æ˜¯å¦ä¸ºç©º</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>? b = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">if</span> (b.HasValue)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;b is <span class="subst">&#123;b.Value&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;b does not have a value&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// b is 10</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span>? c = <span class="number">7</span>;</span><br><span class="line"><span class="keyword">if</span> (c != <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;c is <span class="subst">&#123;c.Value&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;c does not have a value&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// c is 7</span></span><br></pre></td></tr></table></figure><p>å¯ä¸ºç©ºçš„å€¼ç±»å‹è½¬æ¢ä¸ºåŸºç¡€ç±»å‹</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>? a = <span class="number">28</span>;</span><br><span class="line"><span class="built_in">int</span> b = a ?? <span class="number">-1</span>;</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;b is <span class="subst">&#123;b&#125;</span>&quot;</span>);  <span class="comment">// output: b is 28</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span>? c = <span class="literal">null</span>;</span><br><span class="line"><span class="built_in">int</span> d = c ?? <span class="number">-1</span>;</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;d is <span class="subst">&#123;d&#125;</span>&quot;</span>);  <span class="comment">// output: d is -1</span></span><br></pre></td></tr></table></figure><h2 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h2><p><strong>abstractå’Œvirtualçš„åŒºåˆ«</strong></p><p>abstractå’Œvirtualéƒ½æ˜¯ç”¨æ¥ä¿®é¥°æ–¹æ³•çš„å…³é”®å­—ï¼Œå®ƒä»¬çš„åŒºåˆ«ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>abstractåªèƒ½ç”¨åœ¨æŠ½è±¡ç±»ä¸­ï¼Œè€Œvirtualå¯ä»¥ç”¨åœ¨æ™®é€šç±»ä¸­ã€‚</li><li>abstractä¿®é¥°çš„æ–¹æ³•æ²¡æœ‰å®ç°ä½“ï¼Œå¿…é¡»ç”±å­ç±»ç”¨overrideé‡å†™ï¼Œè€Œvirtualä¿®é¥°çš„æ–¹æ³•æœ‰å®ç°ä½“ï¼Œå¯ä»¥ç”±å­ç±»ç”¨overrideé‡å†™ï¼Œä¹Ÿå¯ä»¥ä¸é‡å†™ã€‚</li><li>abstractä¿®é¥°çš„æ–¹æ³•æ˜¯éšå¼è™šçš„ï¼Œä¸éœ€è¦ç”¨virtualå†å£°æ˜ï¼Œè€Œvirtualä¿®é¥°çš„æ–¹æ³•æ˜¯æ˜¾å¼è™šçš„ï¼Œéœ€è¦ç”¨virtualå£°æ˜ã€‚</li><li>abstractä¿®é¥°çš„æ–¹æ³•ä¸èƒ½ç”¨newéšè—ï¼Œè€Œvirtualä¿®é¥°çš„æ–¹æ³•å¯ä»¥ç”¨newéšè—ã€‚</li></ul><p>ç®€å•æ¥è¯´ï¼Œabstractå’Œvirtualçš„ç”¨æ³•å’ŒåŒºåˆ«å¯ä»¥ç”¨ä¸‹é¢çš„è¡¨æ ¼æ€»ç»“ï¼š</p><table><thead><tr><th align="center">ä¿®é¥°ç¬¦</th><th align="center">æ‰€åœ¨ç±»</th><th align="center">å®ç°ä½“</th><th align="center">é‡å†™</th><th align="center">éšå¼è™š</th><th align="center">éšè—</th></tr></thead><tbody><tr><td align="center">abstract</td><td align="center">æŠ½è±¡ç±»</td><td align="center">æ— </td><td align="center">å¿…é¡»</td><td align="center">æ˜¯</td><td align="center">å¦</td></tr><tr><td align="center">virtual</td><td align="center">æ™®é€šç±»</td><td align="center">æœ‰</td><td align="center">å¯é€‰</td><td align="center">å¦</td><td align="center">æ˜¯</td></tr></tbody></table><p><strong>abstractçš„ç”¨æ³•</strong></p><ul><li>abstract ä¿®é¥°ç¬¦å¯ç”¨äºç±»ã€æ–¹æ³•ã€å±æ€§ã€ç´¢å¼•å’Œäº‹ä»¶</li></ul><p>è¢« abstract ä¿®é¥°çš„ç±»ï¼š</p><ul><li>æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–ã€‚</li><li>æ— æ³•ä½¿ç”¨ sealed ä¿®é¥°ç¬¦æ¥ä¿®æ”¹æŠ½è±¡ç±»ï¼Œå› ä¸ºä¸¤ä¸ªä¿®é¥°ç¬¦çš„å«ä¹‰ç›¸åã€‚ sealed ä¿®é¥°ç¬¦é˜»æ­¢ç±»è¢«ç»§æ‰¿ï¼Œè€Œ abstract ä¿®é¥°ç¬¦è¦æ±‚ç±»è¢«ç»§æ‰¿ã€‚</li><li>æ´¾ç”Ÿè‡ªæŠ½è±¡ç±»çš„éæŠ½è±¡ç±»ï¼Œå¿…é¡»åŒ…å«å…¨éƒ¨å·²ç»§æ‰¿çš„æŠ½è±¡æ–¹æ³•å’Œè®¿é—®å™¨çš„å®é™…å®ç°ã€‚</li></ul><p>è¢« abstract ä¿®é¥°çš„æ–¹æ³•ï¼š</p><ul><li>æŠ½è±¡æ–¹æ³•æ˜¯éšå¼çš„è™šæ‹Ÿæ–¹æ³•ã€‚</li><li>åªæœ‰æŠ½è±¡ç±»ä¸­æ‰å…è®¸æŠ½è±¡æ–¹æ³•å£°æ˜ã€‚</li><li>ç”±äºæŠ½è±¡æ–¹æ³•å£°æ˜ä¸æä¾›å®é™…çš„å®ç°ï¼Œå› æ­¤æ²¡æœ‰æ–¹æ³•ä¸»ä½“ï¼›æ–¹æ³•å£°æ˜ä»…ä»¥åˆ†å·ç»“å°¾ï¼Œä¸”ç­¾ååæ²¡æœ‰å¤§æ‹¬å· ({ })</li><li>åœ¨æŠ½è±¡æ–¹æ³•ä¸èƒ½ä½¿ç”¨ static æˆ– virtual ä¿®é¥°ç¬¦ã€‚</li></ul><p><strong>overrideçš„ç”¨æ³•</strong></p><ul><li>override æ–¹æ³•æä¾›ä»åŸºç±»ç»§æ‰¿çš„æ–¹æ³•çš„æ–°å®ç°ã€‚ é€šè¿‡ override å£°æ˜é‡å†™çš„æ–¹æ³•ç§°ä¸ºé‡å†™åŸºæ–¹æ³•ã€‚ </li><li>ä¸èƒ½é‡å†™éè™šæ–¹æ³•æˆ–é™æ€æ–¹æ³•ã€‚ é‡å†™åŸºæ–¹æ³•å¿…é¡»æ˜¯ virtualã€abstract æˆ– overrideã€‚</li><li>override å£°æ˜ä¸èƒ½æ›´æ”¹ virtual æ–¹æ³•çš„å¯è®¿é—®æ€§ã€‚ override æ–¹æ³•å’Œ virtual æ–¹æ³•å¿…é¡»å…·æœ‰ç›¸åŒçº§åˆ«è®¿é—®ä¿®é¥°ç¬¦ã€‚</li><li>ä¸èƒ½ä½¿ç”¨ newã€static æˆ– virtual ä¿®é¥°ç¬¦ä¿®æ”¹ override æ–¹æ³•ã€‚</li></ul><p><strong>sealedçš„ç”¨æ³•</strong></p><ul><li>sealedä¿®é¥°ç¬¦ç”¨æ¥é˜»æ­¢ç±»è¢«ç»§æ‰¿</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤‡å¿˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ VSCode ä¸­è¿œç¨‹è°ƒè¯• Go ç¨‹åº</title>
      <link href="/posts/73130bba/"/>
      <url>/posts/73130bba/</url>
      
        <content type="html"><![CDATA[<p><strong>è°ƒè¯•è¿œç¨‹æœåŠ¡å™¨ä¸­çš„ Go ç¨‹åº</strong></p><p>åœ¨æœåŠ¡ç«¯æ‰§è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dlv debug ./cmd/app/main.go --headless --listen=:2345 --api-version=2 --accept-multiclient --continue</span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go build -gcflags &quot;all=-N -l&quot; -o app ./cmd/app</span><br><span class="line">dlv exec ./app --headless --listen=:2345 --api-version=2 --accept-multiclient --continue</span><br></pre></td></tr></table></figure><p><strong>è°ƒè¯•è¿œç¨‹å®¹å™¨ä¸­çš„ Go ç¨‹åº</strong></p><p>åˆ›å»º Dockerfile æ–‡ä»¶ <code>debug.Dockerfile</code> ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Compile stage</span></span><br><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.19</span> AS build-<span class="keyword">env</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> go <span class="built_in">env</span> -w GOPROXY=https://goproxy.cn,direct</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Build Delve</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> go install github.com/go-delve/delve/cmd/dlv@latest</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /dockerdev</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> go build -gcflags=<span class="string">&quot;all=-N -l&quot;</span> -o app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Final stage</span></span><br><span class="line"><span class="keyword">FROM</span> debian:buster</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">18000</span> <span class="number">2345</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=build-env /go/bin/dlv /</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=build-env /dockerdev/app .</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;/dlv&quot;</span>, <span class="string">&quot;--listen=:2345&quot;</span>, <span class="string">&quot;--headless=true&quot;</span>, <span class="string">&quot;--api-version=2&quot;</span>, <span class="string">&quot;--accept-multiclient&quot;</span>, <span class="string">&quot;exec&quot;</span>, <span class="string">&quot;/app&quot;</span>]</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨å®¹å™¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker build -f debug.Dockerfile -t app:v1 .</span><br><span class="line">docker run --rm --name my_app -p 18000:18000 -p 2345:2345 --security-opt=&quot;apparmor=unconfined&quot; --cap-add=SYS_PTRACE app:v1</span><br></pre></td></tr></table></figure><p><strong>æœ€å</strong></p><p>åœ¨ <code>.vscode/launch.json</code> ä¸­é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Connect to server&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;go&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;debugAdapter&quot;</span><span class="punctuation">:</span> <span class="string">&quot;legacy&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;attach&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;remote&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">2345</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;host&quot;</span><span class="punctuation">:</span> <span class="string">&quot;192.168.1.233&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æ›´å¤šï¼š<a href="https://github.com/golang/vscode-go/blob/master/docs/debugging.md">https://github.com/golang/vscode-go/blob/master/docs/debugging.md</a></p>]]></content>
      
      
      <categories>
          
          <category> çŸ¥é“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
            <tag> dlv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LaTeX ç®€å•ç”¨ç”¨</title>
      <link href="/posts/4528fd42/"/>
      <url>/posts/4528fd42/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæœ€å°çš„å®Œæ•´æºæ–‡ä»¶ï¼Œ<code>sample.tex</code></p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\documentclass</span>&#123;article&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line">Small is beautiful.</span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä½•ç¼–è¯‘è¿™ä¸ªæºæ–‡ä»¶ï¼Ÿ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xelatex sample.tex <span class="comment"># æˆ–</span></span><br><span class="line">xelatex -output-directory=mydir -job-name=mysample sample.tex</span><br></pre></td></tr></table></figure><p><code>-output-directory</code> æŒ‡å®šè¾“å‡ºçš„ç›®å½•ï¼Œ<code>-job-name</code> æŒ‡å®šè¾“å‡ºçš„æ–‡ä»¶åå­—ã€‚</p><p><strong>å‘½ä»¤æœ‰ä¸¤ç§</strong></p><p>åæ–œæ  \ å¼€å§‹åŠ ä¸Šå­—æ¯ï¼š<code>\documentclass[a4paper,11pt]&#123;article&#125;</code>ï¼Œå¤§æ‹¬å·é‡Œæ˜¯å‚æ•°ï¼Œä¸­æ‹¬å·é‡Œæ˜¯å¯é€‰å‚æ•°ï¼Œå¯é€‰å‚æ•°ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚</p><p>åæ–œæ  \ å¼€å§‹åŠ ä¸Šç‰¹æ®Šå­—ç¬¦ï¼š<code>\\</code>ï¼Œæ„æ€æ˜¯å¼ºåˆ¶æ–­è¡Œã€‚</p><p><strong>ç‰¹æ®Šå­—ç¬¦</strong></p><p>å¼•å·ï¼šä¸¤ä¸ªå·¦å•å¼•å·æ˜¯ä¸€ä¸ªå·¦å¼•å· <code>â€˜â€˜</code> ä¸¤ä¸ªå³å•å¼•å·æ˜¯ä¸€ä¸ªå³å¼•å· <code>â€™â€™</code></p><p>ç ´æŠ˜å·å’Œè¿å­—å·ï¼š<code>-</code> æ˜¯è¿å­—å·ï¼Œ<code>--</code> æ˜¯çŸ­ç ´æŠ˜å·ï¼Œ<code>---</code> æ˜¯é•¿ç ´æŠ˜å·</p><p>æ³¢æµªå·ï¼š <code>\~</code></p><p>åº¦ï¼š<code>$-30\,^&#123;\circ&#125;\mathrm&#123;C&#125;$</code></p><p>çœç•¥å·ï¼š<code>\ldots</code></p><p>ç¦æ­¢è¿å­—ï¼š<code>\mbox&#123;&#125;</code>ï¼Œä¾‹å¦‚ <code>shelf\mbox&#123;&#125;ful</code></p><p><strong>å¼ºè°ƒ</strong></p><p>ä¸‹åˆ’çº¿ï¼š<code>\underline&#123;text&#125;</code>ï¼Œåœ¨å°åˆ·çš„ä¹¦ä¸­ï¼Œç”¨ <code>\emph&#123;text&#125;</code> æ¥å¼ºè°ƒæ–‡æœ¬ã€‚</p><p><strong>ç¯å¢ƒ</strong></p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\begin</span>&#123;environment&#125;</span><br><span class="line">text</span><br><span class="line"><span class="keyword">\end</span>&#123;environment&#125;</span><br></pre></td></tr></table></figure><p>environment æ˜¯ç¯å¢ƒçš„åç§°ã€‚</p><p><code>itemize</code> ç¯å¢ƒç”¨äºç®€å•çš„åˆ—è¡¨ï¼Œ<code>enumerate</code> ç¯å¢ƒç”¨äºå¸¦åºå·çš„åˆ—è¡¨ï¼Œ<code>description</code> ç¯å¢ƒç”¨äºå¸¦æè¿°çš„åˆ—è¡¨ã€‚</p><p><code>flushleft</code> å’Œ <code>flushright</code> ç¯å¢ƒåˆ†åˆ«äº§ç”Ÿé å·¦æ’åˆ—å’Œé å³æ’åˆ—çš„æ®µè½ã€‚<code>center</code> ç¯å¢ƒäº§ç”Ÿå±…ä¸­çš„æ–‡æœ¬ã€‚</p><p><code>quote</code> ç¯å¢ƒç”¨äºé‡è¦æ–­è¯­å’Œä¾‹å­çš„å¼•ç”¨ã€‚</p><p><code>quotation</code> ç¯å¢ƒç”¨äºè¶…è¿‡å‡ æ®µçš„è¾ƒé•¿å¼•ç”¨ã€‚<code>verse</code> ç¯å¢ƒç”¨äºè¯—æ­Œã€‚</p><p><code>verbatim</code> ä¹‹é—´çš„æ–‡æœ¬å°†ç›´æ¥æ‰“å°ï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„æ–­è¡Œå’Œç©ºç™½ï¼Œå°±åƒåœ¨æ‰“å­—æœºä¸Šé”®å…¥ä¸€æ ·ï¼Œä¸æ‰§è¡Œä»»ä½• LATEX å‘½ä»¤ã€‚ç›¸å½“äº <code>\verb+text+</code>ï¼Œ+ ä»…æ˜¯åˆ†éš”ç¬¦çš„ä¸€ä¸ªä¾‹å­ã€‚é™¤äº† * æˆ–ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚</p><p><strong>æ•°å­¦å…¬å¼</strong></p><p>æ®µè½ä¸­çš„æ•°å­¦è¡¨è¾¾å¼åº”è¯¥ç½®äº <code>\(</code> å’Œ <code>\)</code>ï¼Œ <code>$</code> å’Œ <code>$</code> ä¹‹é—´ï¼Œæˆ–è€… <code>\begin&#123;math&#125;</code> å’Œ <code>\end&#123;math&#125;</code> ä¹‹é—´ã€‚</p><p>å¯¹äºè¾ƒå¤§çš„æ•°å­¦å¼å­ï¼Œåº”è¯¥ç½®äº <code>\[</code> å’Œ <code>\]</code> æˆ–è€… <code>\begin&#123;displaymath&#125;</code> å’Œ <code>\end&#123;displaymath&#125;</code> ä¹‹é—´ã€‚å¦‚æœä½ å¸Œæœ›ç»™å…¬å¼æ·»åŠ ç¼–å·ï¼Œå¯ä»¥ä½¿ç”¨ <code>\begin&#123;equation&#125;</code> å’Œ <code>\end&#123;equation&#125;</code>ï¼Œå¹¶åˆ©ç”¨ <code>\label</code> å’Œ <code>\ref</code> å¯¹å…¬å¼åŠ ä»¥å¼•ç”¨ã€‚ã€‚</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\begin</span>&#123;equation&#125; <span class="keyword">\label</span>&#123;eq:eps&#125;</span><br><span class="line"><span class="keyword">\epsilon</span> &gt; 0</span><br><span class="line"><span class="keyword">\end</span>&#123;equation&#125;</span><br><span class="line">From (<span class="keyword">\ref</span>&#123;eq:eps&#125;), we gather</span><br><span class="line"><span class="keyword">\ldots</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> çŸ¥é“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LaTeX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ Go ä¸­æ‰§è¡Œäº‹åŠ¡</title>
      <link href="/posts/3039fbbf/"/>
      <url>/posts/3039fbbf/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆä»æ ‡å‡†åº“ä¸­æ‰¾å‡º <code>sql.DB</code> å’Œ <code>sql.Tx</code> å…¬å…±çš„æ–¹æ³•ï¼Œä½œä¸ºæ“ä½œæ•°æ®åº“çš„æ¥å£ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> database</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> db *sql.DB</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetDB</span><span class="params">()</span></span> *sql.DB &#123;</span><br><span class="line"><span class="keyword">return</span> db</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> DB <span class="keyword">interface</span> &#123;</span><br><span class="line">PrepareContext(ctx context.Context, query <span class="type">string</span>) (*sql.Stmt, <span class="type">error</span>)</span><br><span class="line">Prepare(query <span class="type">string</span>) (*sql.Stmt, <span class="type">error</span>)</span><br><span class="line">ExecContext(ctx context.Context, query <span class="type">string</span>, args ...any) (sql.Result, <span class="type">error</span>)</span><br><span class="line">Exec(query <span class="type">string</span>, args ...any) (sql.Result, <span class="type">error</span>)</span><br><span class="line">QueryContext(ctx context.Context, query <span class="type">string</span>, args ...any) (*sql.Rows, <span class="type">error</span>)</span><br><span class="line">Query(query <span class="type">string</span>, args ...any) (*sql.Rows, <span class="type">error</span>)</span><br><span class="line">QueryRowContext(ctx context.Context, query <span class="type">string</span>, args ...any) *sql.Row</span><br><span class="line">QueryRow(query <span class="type">string</span>, args ...any) *sql.Row</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¼ªä»£ç ï¼Œä»¥æ“ä½œ user è¡¨ä¸ºä¾‹, å®šä¹‰ IUserRepository æ¥å£å¹¶å®ç°è¿™ä¸ªæ¥å£</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> repository</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> IUserRepository <span class="keyword">interface</span> &#123;</span><br><span class="line">InsertUser(ctx context.Context, user *User) <span class="type">error</span></span><br><span class="line">GettUserById(ctx context.Context, id <span class="type">int64</span>) (*User, <span class="type">error</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> UserRepository <span class="keyword">struct</span> &#123;</span><br><span class="line">db database.DB</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewUserRepository</span><span class="params">(db database.DB)</span></span> *UserRepository &#123;</span><br><span class="line"><span class="keyword">return</span> &amp;UserRepository&#123;db: db&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *UserRepository)</span></span> WithTx(tx *sql.Tx) *UserRepository &#123;</span><br><span class="line"><span class="keyword">return</span> &amp;UserRepository&#123;db: tx&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *UserRepository)</span></span> InsertUser(ctx context.Context, user *User) <span class="type">error</span> &#123;</span><br><span class="line">_, err := r.db.ExecContext(ctx, <span class="string">&quot;insert into user ...&quot;</span>, user.Name)</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *UserRepository)</span></span> GettUserById(ctx context.Context, id <span class="type">int64</span>) (*User, <span class="type">error</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> user User</span><br><span class="line"><span class="keyword">if</span> err := r.db.QueryRowContext(ctx, <span class="string">&quot;select id, name from user ...&quot;</span>, id).Scan(&amp;user.Id, &amp;user.Name); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> &amp;user, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ repository çš„ä¸Šå±‚ä½¿ç”¨äº‹åŠ¡</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> usecase</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> UserUsecase <span class="keyword">struct</span> &#123;</span><br><span class="line">UserRepository repository.IUserRepository</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *UserUsecase)</span></span> AddUser(ctx context.Context, user *User) <span class="type">error</span> &#123;</span><br><span class="line">tx, err := database.GetDB().Begin()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> tx.Rollback()</span><br><span class="line"></span><br><span class="line">err = u.UserRepository.WithTx(tx).InsertUser(ctx, user)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// some other transactions ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> tx.Commit()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸æƒ³æ‰‹å†™å¼€å§‹äº‹åŠ¡å’Œæäº¤äº‹åŠ¡ï¼Œå¯ä»¥å‚ç…§ <code>github.com/jackc/pgx/v4</code> ä¸­çš„ <code>(*Pool).BeginFunc</code> è‡ªå·±å°è£…ä¸€ä¸ªä¸“é—¨ç”¨æ¥æ‰§è¡Œäº‹åŠ¡çš„æ–¹æ³•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
            <tag> transactions </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ Go ä¸­ä½¿ç”¨ pprof å·¥å…·</title>
      <link href="/posts/338086b9/"/>
      <url>/posts/338086b9/</url>
      
        <content type="html"><![CDATA[<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>ä¸‹è½½å¹¶å®‰è£… Graphviz å·¥å…·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://graphviz.org/download/</span><br></pre></td></tr></table></figure><h2 id="åœ¨ä»£ç ä¸­å¼•å…¥-pprof-åŒ…"><a href="#åœ¨ä»£ç ä¸­å¼•å…¥-pprof-åŒ…" class="headerlink" title="åœ¨ä»£ç ä¸­å¼•å…¥ pprof åŒ…"></a>åœ¨ä»£ç ä¸­å¼•å…¥ pprof åŒ…</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="string">&quot;net/http/pprof&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        log.Println(http.ListenAndServe(<span class="string">&quot;:6060&quot;</span>, <span class="literal">nil</span>))</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// do something...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨æ‰“å¼€ <code>http://localhost:6060/debug/pprof/</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;runtime/pprof&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/pkg/profile&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Handle</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">    f, _ := os.OpenFile(<span class="string">&quot;cpu.pprof&quot;</span>, os.O_CREATE|os.O_RDWR, <span class="number">0644</span>)</span><br><span class="line">    <span class="keyword">defer</span> f.Close()</span><br><span class="line">    pprof.StartCPUProfile(f)</span><br><span class="line">    <span class="keyword">defer</span> pprof.StopCPUProfile()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">defer</span> profile.Start().Stop()</span><br><span class="line">    <span class="keyword">defer</span> profile.Start(profile.MemProfile).Stop()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// do something...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go tool pprof cpu.pprof</span><br><span class="line">go tool pprof -http=:9999 cpu.pprof</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨å¤šä¸ª gRPC æœåŠ¡ä¹‹é—´ä½¿ç”¨é“¾è·¯è¿½è¸ª</title>
      <link href="/posts/5a43dcd/"/>
      <url>/posts/5a43dcd/</url>
      
        <content type="html"><![CDATA[<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>å®‰è£…å¹¶å¯åŠ¨ jaeger</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --rm --name jaeger \</span><br><span class="line">  -e COLLECTOR_ZIPKIN_HOST_PORT=:9411 \</span><br><span class="line">  -e COLLECTOR_OTLP_ENABLED=true \</span><br><span class="line">  -p 6831:6831/udp \</span><br><span class="line">  -p 6832:6832/udp \</span><br><span class="line">  -p 5778:5778 \</span><br><span class="line">  -p 16686:16686 \</span><br><span class="line">  -p 4317:4317 \</span><br><span class="line">  -p 4318:4318 \</span><br><span class="line">  -p 14250:14250 \</span><br><span class="line">  -p 14268:14268 \</span><br><span class="line">  -p 14269:14269 \</span><br><span class="line">  -p 9411:9411 \</span><br><span class="line">  jaegertracing/all-in-one:1.35</span><br></pre></td></tr></table></figure><h2 id="åˆå§‹åŒ–-TracerProvider"><a href="#åˆå§‹åŒ–-TracerProvider" class="headerlink" title="åˆå§‹åŒ– TracerProvider"></a>åˆå§‹åŒ– TracerProvider</h2><p>åˆå§‹åŒ–ä¸€ä¸ª <code>TracerProvider</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> trace</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;go.opentelemetry.io/otel&quot;</span></span><br><span class="line"><span class="string">&quot;go.opentelemetry.io/otel/attribute&quot;</span></span><br><span class="line"><span class="string">&quot;go.opentelemetry.io/otel/exporters/jaeger&quot;</span></span><br><span class="line"><span class="string">&quot;go.opentelemetry.io/otel/sdk/resource&quot;</span></span><br><span class="line">tracesdk <span class="string">&quot;go.opentelemetry.io/otel/sdk/trace&quot;</span></span><br><span class="line">semconv <span class="string">&quot;go.opentelemetry.io/otel/semconv/v1.10.0&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TracerProviderInit</span><span class="params">(url, serviceName, environment <span class="type">string</span>)</span></span> (*tracesdk.TracerProvider, <span class="type">error</span>) &#123;</span><br><span class="line"><span class="comment">// Create the Jaeger exporter</span></span><br><span class="line">exp, err := jaeger.New(jaeger.WithCollectorEndpoint(jaeger.WithEndpoint(url)))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line">TP := tracesdk.NewTracerProvider(</span><br><span class="line"><span class="comment">// Always be sure to batch in production.</span></span><br><span class="line">tracesdk.WithBatcher(exp),</span><br><span class="line"><span class="comment">// Record information about this application in a Resource.</span></span><br><span class="line">tracesdk.WithResource(resource.NewWithAttributes(</span><br><span class="line">semconv.SchemaURL,</span><br><span class="line">semconv.ServiceNameKey.String(serviceName),</span><br><span class="line">attribute.String(<span class="string">&quot;environment&quot;</span>, environment),</span><br><span class="line">attribute.Int64(<span class="string">&quot;ID&quot;</span>, <span class="number">1</span>),</span><br><span class="line">)),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Register our TracerProvider as the global so any imported</span></span><br><span class="line"><span class="comment">// instrumentation in the future will default to using it.</span></span><br><span class="line">otel.SetTracerProvider(TP)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> TP, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">ctx, cancel := context.WithCancel(context.Background())</span><br><span class="line"><span class="keyword">defer</span> cancel()</span><br><span class="line"></span><br><span class="line">tp, err := trace.TracerProviderInit(<span class="string">&quot;http://localhost:14268/api/traces&quot;</span>, <span class="string">&quot;myapp&quot;</span>, <span class="string">&quot;dev&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;Failed to InitTracerProvider: %v\n&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">err := tp.Shutdown(ctx)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;tp.Shutdown err: %v\n&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ -otelgrpc-ä¸­é—´ä»¶"><a href="#æ·»åŠ -otelgrpc-ä¸­é—´ä»¶" class="headerlink" title="æ·»åŠ  otelgrpc ä¸­é—´ä»¶"></a>æ·»åŠ  <code>otelgrpc</code> ä¸­é—´ä»¶</h2><p>æœåŠ¡ç«¯æ·»åŠ  <code>otelgrpc</code> ä¸­é—´ä»¶</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc&quot;</span></span><br><span class="line"><span class="string">&quot;google.golang.org/grpc&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GrpcServerRun</span><span class="params">()</span></span> &#123;</span><br><span class="line">opts := []grpc.ServerOption&#123;</span><br><span class="line">grpc.UnaryInterceptor(otelgrpc.UnaryServerInterceptor()),</span><br><span class="line">grpc.StreamInterceptor(otelgrpc.StreamServerInterceptor()),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// create new gRPC server</span></span><br><span class="line">server := grpc.NewServer(opts...)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// listen grpc server...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯æ·»åŠ  <code>otelgrpc</code> ä¸­é—´ä»¶</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;context&quot;</span></span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc&quot;</span></span><br><span class="line"><span class="string">&quot;google.golang.org/grpc&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GrpcServerDial</span><span class="params">(ctx context.Context, addr <span class="type">string</span>)</span></span> *grpc.ClientConn &#123;</span><br><span class="line">opts := []grpc.DialOption&#123;</span><br><span class="line">grpc.WithUnaryInterceptor(otelgrpc.UnaryClientInterceptor()),</span><br><span class="line">grpc.WithStreamInterceptor(otelgrpc.StreamClientInterceptor()),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">conn, err := grpc.DialContext(ctx, addr, opts...)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;Dial grpc err: %+v&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> conn</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>gin</code> æ·»åŠ  <code>otelgin</code> ä¸­é—´ä»¶</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;net/http&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line"><span class="string">&quot;go.opentelemetry.io/contrib/instrumentation/github.com/gin-gonic/gin/otelgin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// NewRouter http routes</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewRouter</span><span class="params">(handle *gin.Engine)</span></span> &#123;</span><br><span class="line">handle.Use(otelgin.Middleware(<span class="string">&quot;gin-server&quot;</span>))</span><br><span class="line"></span><br><span class="line">handle.GET(<span class="string">&quot;/healthz&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123; c.Status(http.StatusOK) &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ <code>HelloService</code> é‡Œè¯·æ±‚ <code>PetStoreService</code> çš„ <code>GetPet</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h *HelloService)</span></span> SayHello(ctx context.Context, request *hellov1.SayHelloRequest) (*hellov1.SayHelloResponse, <span class="type">error</span>) &#123;</span><br><span class="line"></span><br><span class="line">ctx = metadata.NewOutgoingContext(ctx, metadata.Pairs())</span><br><span class="line"></span><br><span class="line">getPetResponse, err := petStoreClient.GetPet(ctx, &amp;petv1.GetPetRequest&#123;PetId: <span class="number">1</span>&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &amp;hellov1.SayHelloResponse&#123;Age: <span class="type">int64</span>(getPetResponse.Pet.GetPetType())&#125;, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç»“æŸ"><a href="#ç»“æŸ" class="headerlink" title="ç»“æŸ"></a>ç»“æŸ</h2><p>æœ€åï¼Œè¯·æ±‚ä¸€æ¬¡è¿™ä¸ªæœåŠ¡ä¹‹åï¼Œåˆ·æ–° <code>http://localhost:16686/search</code>ã€‚</p><blockquote><p>å‚è€ƒ<br><a href="https://opentelemetry.io/docs/">https://opentelemetry.io/docs/</a><br><a href="https://www.jaegertracing.io/docs/1.35/">https://www.jaegertracing.io/docs/1.35/</a><br><a href="https://github.com/open-telemetry/opentelemetry-go-contrib">https://github.com/open-telemetry/opentelemetry-go-contrib</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
            <tag> gRPC </tag>
            
            <tag> OpenTelemetry </tag>
            
            <tag> Jaeger </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PostgreSQL å¤‡ä»½ä¸æ¢å¤</title>
      <link href="/posts/5790da06/"/>
      <url>/posts/5790da06/</url>
      
        <content type="html"><![CDATA[<h2 id="æŸ¥çœ‹ç£ç›˜å ç”¨æƒ…å†µ"><a href="#æŸ¥çœ‹ç£ç›˜å ç”¨æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹ç£ç›˜å ç”¨æƒ…å†µ"></a>æŸ¥çœ‹ç£ç›˜å ç”¨æƒ…å†µ</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> schemaname, relname, pg_size_pretty(pg_total_relation_size(relid)) <span class="keyword">AS</span> size <span class="keyword">FROM</span> pg_catalog.pg_statio_user_tables <span class="keyword">ORDER</span> <span class="keyword">BY</span> pg_total_relation_size(relid) <span class="keyword">DESC</span> LIMIT <span class="number">10</span>;</span><br></pre></td></tr></table></figure><h2 id="å¤‡ä»½å•ä¸ªæ•°æ®åº“"><a href="#å¤‡ä»½å•ä¸ªæ•°æ®åº“" class="headerlink" title="å¤‡ä»½å•ä¸ªæ•°æ®åº“"></a>å¤‡ä»½å•ä¸ªæ•°æ®åº“</h2><p><code>-h</code> å’Œ <code>-p</code> å¯ä»¥çœç•¥ï¼Œé»˜è®¤å¤‡ä»½æˆçº¯æ–‡æœ¬æ ¼å¼ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤‡ä»½æˆ sql æ–‡ä»¶</span></span><br><span class="line">pg_dump -U postgres --encoding utf8 -f dumpfile.sql dbname</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä» sql æ–‡ä»¶æ¢å¤</span></span><br><span class="line">psql -U postgres -l</span><br><span class="line">createdb -U postgres -T template0 new_dbname</span><br><span class="line">psql -U postgres --encoding utf8 -d new_dbname -f dumpfile.sql # 15</span><br><span class="line">psql -U postgres -encoding=utf8 -d new_dbname -f dumpfile.sql # 16</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤‡ä»½æˆè‡ªå®šä¹‰æ ¼å¼</span></span><br><span class="line">pg_dump -U postgres --encoding utf8 -F c -f dumpfile.bak dbname</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»è‡ªå®šä¹‰æ ¼å¼æ¢å¤</span></span><br><span class="line">pg_restore -U postgres -d new_dbname dumpfile.bak</span><br></pre></td></tr></table></figure><h2 id="å¤‡ä»½æ‰€æœ‰æ•°æ®åº“"><a href="#å¤‡ä»½æ‰€æœ‰æ•°æ®åº“" class="headerlink" title="å¤‡ä»½æ‰€æœ‰æ•°æ®åº“"></a>å¤‡ä»½æ‰€æœ‰æ•°æ®åº“</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤‡ä»½ï¼Œä½¿ç”¨ pg_dumpall è¿™ä¸ªå‘½ä»¤çš„æ—¶å€™ï¼Œæœ‰å‡ ä¸ªæ•°æ®åº“ï¼Œå°±éœ€è¦è¾“å…¥å‡ æ¬¡æ•°æ®åº“å¯†ç </span></span><br><span class="line">pg_dumpall -U postgres --encoding utf8 -f dumpfile_all.sql</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¢å¤</span></span><br><span class="line">psql -f dumpfile_all.sql postgres</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤‡å¿˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ gRPC ä¸­ä½¿ç”¨ä¸­é—´ä»¶</title>
      <link href="/posts/fedcb43a/"/>
      <url>/posts/fedcb43a/</url>
      
        <content type="html"><![CDATA[<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/grpc-ecosystem/go-grpc-middleware&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
            <tag> gRPC </tag>
            
            <tag> gRPC-middleware </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ PostgreSQL å®ç°å…¨æ–‡æœç´¢</title>
      <link href="/posts/6b725fb3/"/>
      <url>/posts/6b725fb3/</url>
      
        <content type="html"><![CDATA[<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>é¦–å…ˆåˆ›å»ºä¸€å¼ è¡¨, title å’Œ body å­˜å‚¨çš„æ˜¯æ™®é€šçš„æ–‡æœ¬å†…å®¹ï¼Œ doc_tokens æ˜¯ <code>tsverctor</code> ç±»å‹, <code>body</code> ç»è¿‡è§£æä¹‹åçš„å†…å®¹ä¼šæ”¾å…¥ <code>doc_tokens</code> ä¸­</p><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> &quot;public&quot;.&quot;pgweb&quot; (</span><br><span class="line">&quot;id&quot; <span class="type">serial8</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">&quot;title&quot; <span class="type">VARCHAR</span> ( <span class="number">255</span> ) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">&quot;body&quot; <span class="type">VARCHAR</span> ( <span class="number">255</span> ) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">&quot;doc_tokens&quot; <span class="type">tsvector</span>,</span><br><span class="line"><span class="keyword">CONSTRAINT</span> &quot;pgweb_pkey&quot; <span class="keyword">PRIMARY KEY</span> ( &quot;id&quot; ) </span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>åœ¨ <code>doc_tokens</code> åˆ—ä¸Šåˆ›å»ºä¸€ä¸ªåä¸º <code>textsearch_idx</code> çš„ <code>GIN</code> ç±»å‹çš„ç´¢å¼•</p><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> textsearch_idx <span class="keyword">ON</span> pgweb <span class="keyword">USING</span> GIN (doc_tokens);</span><br></pre></td></tr></table></figure><h2 id="tsvector-å’Œ-tsquery"><a href="#tsvector-å’Œ-tsquery" class="headerlink" title="tsvector å’Œ tsquery"></a><code>tsvector</code> å’Œ <code>tsquery</code></h2><p>è¦æƒ³å®ç°å…¨æ–‡æœç´¢ï¼Œé¦–å…ˆè¦æŠŠéœ€è¦æœç´¢çš„æ–‡æ¡£è§£ææˆå®¹æ˜“è¢«è®¡ç®—æœºæœç´¢åˆ°çš„æ•°æ®æ ¼å¼ã€‚è‡³äºå¦‚ä½•è§£æï¼Œè¿™é‡Œæš‚ä¸ç»†è¯´ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»æŠŠæ–‡æ¡£è§£æä¹‹å PostgreSQL æ‰€åšçš„äº‹æƒ…ã€‚</p><blockquote><p>å…³äºæ–‡æ¡£è§£æ, å› ä¸º PostgreSQL ç›®å‰ï¼ˆ14.0ï¼‰ä¸æ”¯æŒä¸­æ–‡åˆ†è¯ï¼Œæ‰€ä»¥è¦æƒ³è§£æä¸­æ–‡æ–‡æ¡£ï¼Œéœ€è¦å®‰è£…ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œæˆ–è€…åœ¨ç¨‹åºé‡Œä½¿ç”¨ç¬¬ä¸‰æ–¹åº“è¿›è¡Œåˆ†è¯ã€‚</p></blockquote><p>é¦–å…ˆä»‹ç» PostgreSQL ä¸­çš„ä¸¤ä¸ªæ•°æ®ç±»å‹ <code>tsvector</code> å’Œ <code>tsquery</code>, ä¸¤ä¸ªæ–¹æ³• <code>to_tsvector()</code> <code>to_tsquery()</code></p><p><code>tsvector</code> ç”¨æ¥å­˜å‚¨è§£æåçš„æ–‡æœ¬, <code>tsquery</code> ç”¨æ¥å­˜å‚¨è¦æœç´¢çš„å…³é”®å­—ã€‚</p><p><code>to_tsvector()</code> ä¼šæŠŠä¼ å…¥çš„æ–‡æœ¬è½¬ä¸º <code>tsvector</code> ç±»å‹, <code>to_tsquery()</code> ä¼šæŠŠä¼ å…¥çš„æ–‡æœ¬è§£æä¸º <code>tsquery</code> ç±»å‹ã€‚</p><p>ä¸¤ç§ç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> pgweb <span class="keyword">SET</span> doc_tokens = to_tsvector(<span class="string">&#x27;english&#x27;</span>, body);</span><br><span class="line"><span class="keyword">UPDATE</span> pgweb <span class="keyword">SET</span> doc_tokens = to_tsvector(<span class="string">&#x27;SIMPLE&#x27;</span>, <span class="string">&#x27;é˜¿çŒ« é˜¿ç‹— ä»€ä¹ˆ&#x27;</span>);</span><br><span class="line"><span class="keyword">UPDATE</span> pgweb <span class="keyword">SET</span> doc_tokens = setweight(to_tsvector(COALESCE(body, <span class="string">&#x27;&#x27;</span>)), <span class="string">&#x27;A&#x27;</span>) || setweight(to_tsvector(COALESCE(title, <span class="string">&#x27;&#x27;</span>)), <span class="string">&#x27;B&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> body <span class="keyword">FROM</span> pgweb <span class="keyword">WHERE</span> doc_tokens @@ to_tsquery(<span class="string">&#x27;SIMPLE&#x27;</span>, <span class="string">&#x27;é˜¿çŒ« &amp; é˜¿ç‹—&#x27;</span>);</span><br><span class="line"><span class="comment">-- å¦‚æœè¿™é‡Œè¦åŒ¹é…ä¸­æ–‡ï¼Œè¦æŠŠ english æ›¿æ¢ä¸ºä¸­æ–‡åˆ†è¯æ’ä»¶</span></span><br><span class="line"><span class="keyword">SELECT</span> title <span class="keyword">FROM</span> pgweb <span class="keyword">WHERE</span> to_tsvector(<span class="string">&#x27;english&#x27;</span>, body) @@ to_tsquery(<span class="string">&#x27;english&#x27;</span>, <span class="string">&#x27;friend | old friend&#x27;</span>);</span><br></pre></td></tr></table></figure><p><code>@@</code> è¿ç®—ç¬¦ä¼šæŠŠ <code>tsvector</code> å’Œ <code>tsquery</code> è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœç»“æœä¸º true åˆ™è¿”å›ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
            <tag> Full Text Search </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ Go ä¸­ä½¿ç”¨ Etcd ä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒ</title>
      <link href="/posts/850b06a1/"/>
      <url>/posts/850b06a1/</url>
      
        <content type="html"><![CDATA[<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>å®‰è£…å¹¶å¯åŠ¨ etcd</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://etcd.io/docs/v3.5/install/</span><br><span class="line">https://github.com/etcd-io/etcd/releases/</span><br></pre></td></tr></table></figure><h2 id="åˆå§‹åŒ–-etcd-å®¢æˆ·ç«¯"><a href="#åˆå§‹åŒ–-etcd-å®¢æˆ·ç«¯" class="headerlink" title="åˆå§‹åŒ– etcd å®¢æˆ·ç«¯"></a>åˆå§‹åŒ– etcd å®¢æˆ·ç«¯</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> etcd</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"><span class="string">&quot;sync&quot;</span></span><br><span class="line"></span><br><span class="line">clientv3 <span class="string">&quot;go.etcd.io/etcd/client/v3&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">etcdClient = &amp;clientv3.Client&#123;&#125;</span><br><span class="line">once       = &amp;sync.Once&#123;&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">EtcdInit</span><span class="params">(addr <span class="type">string</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> err <span class="type">error</span></span><br><span class="line"></span><br><span class="line">once.Do(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">etcdClient, err = clientv3.NewFromURL(addr)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;etcd init error, err: %v&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">EtcdClient</span><span class="params">()</span></span> *clientv3.Client &#123;</span><br><span class="line"><span class="keyword">return</span> etcdClient</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŠŠæœåŠ¡æ³¨å†Œè¿›-etcd"><a href="#æŠŠæœåŠ¡æ³¨å†Œè¿›-etcd" class="headerlink" title="æŠŠæœåŠ¡æ³¨å†Œè¿› etcd"></a>æŠŠæœåŠ¡æ³¨å†Œè¿› etcd</h2><p><code>serviceName</code> æ˜¯è¦å¾€ etcd ä¸­æ³¨å†Œçš„æœåŠ¡åç§°ï¼Œ<code>endpoint</code> æ˜¯è¿™ä¸ªæœåŠ¡çš„åœ°å€</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;context&quot;</span></span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;etcd-grpc-go/etcd&quot;</span></span><br><span class="line"><span class="string">&quot;go.etcd.io/etcd/client/v3/naming/endpoints&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Registry</span><span class="params">(ctx context.Context, serviceName, endpoint <span class="type">string</span>)</span></span> <span class="type">error</span> &#123;</span><br><span class="line"></span><br><span class="line">client := etcd.EtcdClient()</span><br><span class="line"></span><br><span class="line">em, err := endpoints.NewManager(client, serviceName)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">err = em.AddEndpoint(ctx, serviceName+<span class="string">&quot;/1&quot;</span>, endpoints.Endpoint&#123;Addr: endpoint&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">err := Registry(context.Background(), <span class="string">&quot;petservice&quot;</span>, <span class="string">&quot;localhost:9090&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;registry err: %v&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä»-etcd-ä¸­è·å–ä¸€ä¸ªæœåŠ¡"><a href="#ä»-etcd-ä¸­è·å–ä¸€ä¸ªæœåŠ¡" class="headerlink" title="ä» etcd ä¸­è·å–ä¸€ä¸ªæœåŠ¡"></a>ä» etcd ä¸­è·å–ä¸€ä¸ªæœåŠ¡</h2><p><code>addr</code> æ˜¯ etcd æœåŠ¡çš„åœ°å€ï¼Œ<code>serviceName</code> æ˜¯ä¸Šä¸€æ­¥æ³¨å†Œè¿› etcd çš„æœåŠ¡åç§°</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;context&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;etcd-grpc-go/etcd&quot;</span></span><br><span class="line"><span class="string">&quot;go.etcd.io/etcd/client/v3/naming/resolver&quot;</span></span><br><span class="line"><span class="string">&quot;google.golang.org/grpc&quot;</span></span><br><span class="line"><span class="string">&quot;google.golang.org/grpc/credentials/insecure&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Discovery</span><span class="params">(ctx context.Context, addr, serviceName <span class="type">string</span>)</span></span> (*grpc.ClientConn, <span class="type">error</span>) &#123;</span><br><span class="line"></span><br><span class="line">client := etcd.EtcdClient()</span><br><span class="line"></span><br><span class="line">etcdResolver, err := resolver.NewBuilder(client)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;etcd resolver err: %w&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">opts := []grpc.DialOption&#123;</span><br><span class="line">grpc.WithDefaultServiceConfig(<span class="string">`&#123;&quot;loadBalancingPolicy&quot;: &quot;round_robin&quot;&#125;`</span>),</span><br><span class="line">grpc.WithTransportCredentials(insecure.NewCredentials()),</span><br><span class="line">grpc.WithResolvers(etcdResolver),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">target := fmt.Sprintf(<span class="string">&quot;etcd://%s/%s&quot;</span>, addr, serviceName)</span><br><span class="line"></span><br><span class="line">conn, err := grpc.DialContext(ctx, target, opts...)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;Dial grpc err: %w&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> conn, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">conn, err := Discovery(context.Background(), <span class="string">&quot;localhost:2379&quot;</span>, <span class="string">&quot;petservice&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;discovery err: %v&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">petStoreServiceClient := petv1.NewPetStoreServiceClient(conn)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
            <tag> gRPC </tag>
            
            <tag> etcd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ Go ä¸­ä½¿ç”¨ gRPC-Gateway</title>
      <link href="/posts/65fb2554/"/>
      <url>/posts/65fb2554/</url>
      
        <content type="html"><![CDATA[<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>å®‰è£… <code>protoc</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://grpc.io/docs/protoc-installation/</span><br></pre></td></tr></table></figure><p>å®‰è£… grpc æ’ä»¶ å’Œ buf å·¥å…·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">go install github.com/grpc-ecosystem/grpc-gateway/v2/protoc-gen-grpc-gateway@latest</span><br><span class="line">go install github.com/grpc-ecosystem/grpc-gateway/v2/protoc-gen-openapiv2@latest</span><br><span class="line">go install google.golang.org/protobuf/cmd/protoc-gen-go@latest</span><br><span class="line">go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest</span><br><span class="line">go install github.com/bufbuild/buf/cmd/buf@latest</span><br></pre></td></tr></table></figure><p>ä¸‹è½½ <code>google/api</code> æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/googleapis/googleapis</span><br></pre></td></tr></table></figure><h2 id="ç¼–å†™-proto-æ–‡ä»¶"><a href="#ç¼–å†™-proto-æ–‡ä»¶" class="headerlink" title="ç¼–å†™ proto æ–‡ä»¶"></a>ç¼–å†™ proto æ–‡ä»¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">syntax = &quot;proto3&quot;;</span><br><span class="line"></span><br><span class="line">package pet.v1;</span><br><span class="line"></span><br><span class="line">option go_package = &quot;.;petv1&quot;;</span><br><span class="line"></span><br><span class="line">import &quot;google/api/annotations.proto&quot;;</span><br><span class="line">import &quot;google/type/datetime.proto&quot;;</span><br><span class="line"></span><br><span class="line">// PetType represents the different types of pets in the pet store.</span><br><span class="line">enum PetType &#123;</span><br><span class="line">  PET_TYPE_UNSPECIFIED = 0;</span><br><span class="line">  PET_TYPE_CAT = 1;</span><br><span class="line">  PET_TYPE_DOG = 2;</span><br><span class="line">  PET_TYPE_SNAKE = 3;</span><br><span class="line">  PET_TYPE_HAMSTER = 4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Pet represents a pet in the pet store.</span><br><span class="line">message Pet &#123;</span><br><span class="line">  PetType pet_type = 1;</span><br><span class="line">  string pet_id = 2;</span><br><span class="line">  string name = 3;</span><br><span class="line">  google.type.DateTime created_at = 4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">message GetPetRequest &#123;</span><br><span class="line">  string pet_id = 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">message GetPetResponse &#123;</span><br><span class="line">  Pet pet = 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">service PetStoreService &#123;</span><br><span class="line">  rpc GetPet(GetPetRequest) returns (GetPetResponse) &#123;</span><br><span class="line">    option (google.api.http) = &#123;</span><br><span class="line">      get: &quot;/v1/pet/&#123;pet_id&#125;&quot;</span><br><span class="line">      body: &quot;*&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿæˆ-go-ä»£ç "><a href="#ç”Ÿæˆ-go-ä»£ç " class="headerlink" title="ç”Ÿæˆ go ä»£ç "></a>ç”Ÿæˆ go ä»£ç </h2><p>è¿™é‡Œä½¿ç”¨ protoc å·¥å…·ç”Ÿæˆ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">protoc -I . \</span><br><span class="line">--proto_path=. \</span><br><span class="line">--go_out ./gen/go/ --go_opt paths=source_relative \</span><br><span class="line">--go-grpc_out ./gen/go/ --go-grpc_opt paths=source_relative \</span><br><span class="line">--grpc-gateway_out ./gen/go/ \</span><br><span class="line">--grpc-gateway_opt logtostderr=<span class="literal">true</span> \</span><br><span class="line">--grpc-gateway_opt paths=source_relative \</span><br><span class="line">--grpc-gateway_opt generate_unbound_methods=<span class="literal">true</span> \</span><br><span class="line">api/petapis/pet/v1/pet.proto</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»º-grpc-server-å’Œ-http-server"><a href="#åˆ›å»º-grpc-server-å’Œ-http-server" class="headerlink" title="åˆ›å»º grpc server å’Œ http server"></a>åˆ›å»º grpc server å’Œ http server</h2><p>å®ç° <code>petv1.PetStoreServiceServer</code> æ¥å£</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> PetService <span class="keyword">struct</span> &#123;</span><br><span class="line">petv1.UnimplementedPetStoreServiceServer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(ps *PetService)</span></span> GetPet(ctx context.Context, request *petv1.GetPetRequest) (*petv1.GetPetResponse, <span class="type">error</span>) &#123;</span><br><span class="line"></span><br><span class="line">petId := request.GetPetId()</span><br><span class="line"></span><br><span class="line">pet := &amp;petv1.Pet&#123;</span><br><span class="line">PetType:   petv1.PetType_PET_TYPE_DOG,</span><br><span class="line">PetId:     petId,</span><br><span class="line">Name:      <span class="string">&quot;dog&quot;</span>,</span><br><span class="line">CreatedAt: <span class="literal">nil</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &amp;petv1.GetPetResponse&#123;Pet: pet&#125;, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»º grpc server</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">runGrpcServer</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// create new gRPC server</span></span><br><span class="line">server := grpc.NewServer()</span><br><span class="line"><span class="comment">// register the GreeterServerImpl on the gRPC server</span></span><br><span class="line">petv1.RegisterPetStoreServiceServer(server, &amp;PetService&#123;&#125;)</span><br><span class="line"><span class="comment">// start listening on port :8080 for a tcp connection</span></span><br><span class="line"><span class="keyword">if</span> l, err := net.Listen(<span class="string">&quot;tcp&quot;</span>, <span class="string">&quot;:9001&quot;</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(<span class="string">&quot;error in listening on port :9001&quot;</span>, err)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// the start gRPC server</span></span><br><span class="line"><span class="keyword">if</span> err := server.Serve(l); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(<span class="string">&quot;unable to start server&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»º http server</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">runhttpServer</span><span class="params">()</span></span> <span class="type">error</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> runGrpcServer()</span><br><span class="line"></span><br><span class="line">ctx, cancel := context.WithCancel(context.Background())</span><br><span class="line"><span class="keyword">defer</span> cancel()</span><br><span class="line"></span><br><span class="line">mux := runtime.NewServeMux()</span><br><span class="line"></span><br><span class="line">opts := []grpc.DialOption&#123;grpc.WithTransportCredentials(insecure.NewCredentials())&#125;</span><br><span class="line"></span><br><span class="line">err := petv1.RegisterPetStoreServiceHandlerFromEndpoint(ctx, mux, <span class="string">&quot;localhost:9001&quot;</span>, opts)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Start HTTP server (and proxy calls to gRPC server endpoint)</span></span><br><span class="line">httpServer := httpserver.New(mux, httpserver.Port(<span class="string">&quot;8001&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// Waiting signal</span></span><br><span class="line">interrupt := <span class="built_in">make</span>(<span class="keyword">chan</span> os.Signal, <span class="number">1</span>)</span><br><span class="line">signal.Notify(interrupt, os.Interrupt, syscall.SIGTERM)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> s := &lt;-interrupt:</span><br><span class="line">log.Printf(<span class="string">&quot;app - Run - signal: &quot;</span> + s.String())</span><br><span class="line"><span class="keyword">case</span> err = &lt;-httpServer.Notify():</span><br><span class="line">log.Println(fmt.Errorf(<span class="string">&quot;app - Run - httpServer.Notify: %w&quot;</span>, err))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Shutdown</span></span><br><span class="line">err = httpServer.Shutdown()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Println(fmt.Errorf(<span class="string">&quot;app - Run - httpServer.Shutdown: %w&quot;</span>, err))</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ gin æ¡†æ¶</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server := gin.New()</span><br><span class="line">server.Use(gin.Logger())</span><br><span class="line">server.Group(<span class="string">&quot;v1/*&#123;grpc_gateway&#125;&quot;</span>).Any(<span class="string">&quot;&quot;</span>, gin.WrapH(mux))</span><br><span class="line"></span><br><span class="line">server.GET(<span class="string">&quot;/test&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">c.String(http.StatusOK, <span class="string">&quot;Ok&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">httpServer := httpserver.New(server, httpserver.Port(<span class="string">&quot;8001&quot;</span>))</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡ä¹‹åï¼Œå‘é€ http è¯·æ±‚</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET http://localhost:8080/v1/pet/abc</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pet&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;petType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PET_TYPE_DOG&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;petId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;abc&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dog&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;createdAt&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç›®å½•ç»“æ„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ api</span><br><span class="line">â”‚   â””â”€â”€ petapis     </span><br><span class="line">â”‚       â”œâ”€â”€ buf.lock</span><br><span class="line">â”‚       â”œâ”€â”€ buf.yaml</span><br><span class="line">â”‚       â””â”€â”€ pet     </span><br><span class="line">â”‚           â””â”€â”€ v1</span><br><span class="line">â”‚               â””â”€â”€ pet.proto</span><br><span class="line">â”œâ”€â”€ buf.gen.yaml</span><br><span class="line">â”œâ”€â”€ buf.work.yaml</span><br><span class="line">â”œâ”€â”€ go.mod</span><br><span class="line">â”œâ”€â”€ go.sum</span><br><span class="line">â”œâ”€â”€ google</span><br><span class="line">â”‚   â”œâ”€â”€ api</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ annotations.proto</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ field_behavior.proto</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ http.proto</span><br><span class="line">â”‚   â”‚   â””â”€â”€ httpbody.proto</span><br><span class="line">â”‚   â””â”€â”€ type</span><br><span class="line">â”‚       â””â”€â”€ datetime.proto</span><br><span class="line">â”œâ”€â”€ httpserver</span><br><span class="line">â”‚   â”œâ”€â”€ options.go</span><br><span class="line">â”‚   â””â”€â”€ server.go</span><br><span class="line">â””â”€â”€ main.go</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
            <tag> gRPC </tag>
            
            <tag> gRPC-Gateway </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscode for go</title>
      <link href="/posts/edd9ae5c/"/>
      <url>/posts/edd9ae5c/</url>
      
        <content type="html"><![CDATA[<h2 id="å¯åŠ¨è°ƒè¯•"><a href="#å¯åŠ¨è°ƒè¯•" class="headerlink" title="å¯åŠ¨è°ƒè¯•"></a>å¯åŠ¨è°ƒè¯•</h2><p><code>launch.json</code> å†…å®¹å¦‚ä¸‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;go&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;auto&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;/main.go&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;envFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;/.env.example&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>é…ç½®å¥½ <code>launch.json</code> åå°±å¯ä»¥æŒ‰ <code>F5</code> è°ƒè¯•ç¨‹åºäº†ã€‚</p><h2 id="ä¿®æ”¹ç»“æ„ä½“çš„-json-tag-é£æ ¼"><a href="#ä¿®æ”¹ç»“æ„ä½“çš„-json-tag-é£æ ¼" class="headerlink" title="ä¿®æ”¹ç»“æ„ä½“çš„ json tag é£æ ¼"></a>ä¿®æ”¹ç»“æ„ä½“çš„ <code>json tag</code> é£æ ¼</h2><p>vscode ä¸­çš„ go æ’ä»¶ä½¿ç”¨ <a href="https://github.com/fatih/gomodifytags">gomodifytags</a> ç”Ÿæˆ <code>json tag</code> , é»˜è®¤ç”Ÿæˆçš„ <code>json tag</code> é£æ ¼æ˜¯ <code>snakecase</code> ï¼Œåœ¨ <code>setting.json</code> ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œå³å¯æ”¹ä¸º <code>camelcase</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;go.addTags&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;tags&quot;</span><span class="punctuation">:</span> <span class="string">&quot;json&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="string">&quot;json=omitempty&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;promptForTags&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span> <span class="string">&quot;camelcase&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;template&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æ ¹æ®å®˜æ–¹æ–‡æ¡£çš„ä»‹ç»ï¼Œ<code>transform</code> å­—æ®µæœ‰è¿™äº›é€‰é¡¹ï¼š<code>snakecase</code>, <code>camelcase</code>, <code>lispcase</code>, <code>pascalcase</code>, <code>keep</code></p><p>å‚è€ƒé“¾æ¥ï¼š</p><ul><li><a href="https://github.com/golang/vscode-go/blob/master/docs/settings.md">vscode-go&#x2F;settings.md at master Â· golang&#x2F;vscode-go (github.com)</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go æ³¨æ„äº‹é¡¹</title>
      <link href="/posts/ad9abcd3/"/>
      <url>/posts/ad9abcd3/</url>
      
        <content type="html"><![CDATA[<h3 id="åœ¨-Go-ä¸­ä½¿ç”¨-stringer-tool"><a href="#åœ¨-Go-ä¸­ä½¿ç”¨-stringer-tool" class="headerlink" title="åœ¨ Go ä¸­ä½¿ç”¨ stringer tool"></a>åœ¨ Go ä¸­ä½¿ç”¨ stringer tool</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go install golang.org/x/tools/cmd/stringer@latest</span><br></pre></td></tr></table></figure><p>å®šä¹‰ä¸€ä¸ª ErrCode ç±»å‹</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> ErrCode <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">ERR_CODE_OK             ErrCode = <span class="number">0</span> <span class="comment">// OK</span></span><br><span class="line">ERR_CODE_INVALID_PARAMS ErrCode = <span class="number">1</span> <span class="comment">// æ— æ•ˆå‚æ•°</span></span><br><span class="line">ERR_CODE_TIMEOUT        ErrCode = <span class="number">2</span> <span class="comment">// è¶…æ—¶</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>è¿”å›å˜é‡å</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//go:generate stringer -type ErrCode -output code_string.go</span></span><br></pre></td></tr></table></figure><p>è¿”å›æ³¨é‡Š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//go:generate stringer -type ErrCode -linecomment -output code_string.go</span></span><br></pre></td></tr></table></figure><h3 id="Goæ£€æµ‹ç±»å‹æ˜¯å¦å®ç°æ¥å£"><a href="#Goæ£€æµ‹ç±»å‹æ˜¯å¦å®ç°æ¥å£" class="headerlink" title="Goæ£€æµ‹ç±»å‹æ˜¯å¦å®ç°æ¥å£"></a>Goæ£€æµ‹ç±»å‹æ˜¯å¦å®ç°æ¥å£</h3><p>æœ‰æ—¶å€™ä¼šçœ‹åˆ°è¿™ç§ä»£ç ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _ IRouter = &amp;Engine&#123;&#125;</span><br></pre></td></tr></table></figure><p>IRouteræ˜¯ä¸€ä¸ªæ¥å£ç±»å‹ï¼ŒEngineæ˜¯è‡ªå®šä¹‰çš„ç»“æ„ä½“ï¼Œè¿™è¡Œä»£ç çš„æ„æ€æ˜¯åœ¨ç¼–è¯‘å‰æ£€æµ‹è¿™ä¸ª*Engineç±»å‹æœ‰æ²¡æœ‰å®ç°IRouteræ¥å£ï¼Œæ²¡æœ‰å°±ä¼šæŠ¥é”™ï¼Œç¼–è¯‘å°±ä¸ä¼šé€šè¿‡ã€‚</p><h3 id="å­—ç¬¦ä¸²çš„é•¿åº¦å’Œéå†å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²çš„é•¿åº¦å’Œéå†å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²çš„é•¿åº¦å’Œéå†å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²çš„é•¿åº¦å’Œéå†å­—ç¬¦ä¸²</h3><p>ç›´æ¥ä½¿ç”¨ <code>len</code> å…³é”®å­—è¿”å›çš„æ˜¯å­—èŠ‚é•¿åº¦ï¼Œè¦è·å–ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œéœ€è¦ä½¿ç”¨ <code>utf8.RuneCountInString</code> æ–¹æ³•ã€‚</p><p>éå†ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œéå†çš„æ˜¯è¿™ä¸ªå­—ç¬¦å¯¹åº”çš„ä¸€ä¸ªåˆ«åä¸º <code>rune</code> çš„ <code>int32</code> ç±»å‹çš„æ•´æ•°ï¼Œè¿™ä¸ªæ•´æ•°å¯¹åº” <code>Unicode</code> ç ç‚¹çš„èŒƒå›´ï¼ˆU+0000 åˆ° U+10FFFFï¼‰ï¼Œå¦‚æœè¦æ‰“å°å‡ºè¿™ä¸ªå­—ç¬¦çš„ <code>Unicode</code> ç ç‚¹, ä½¿ç”¨ <code>%U</code> æ ¼å¼åŒ–ï¼Œå¦‚æœè¦æ‰“å°å‡ºè¿™ä¸ªç ç‚¹å¯¹åº”çš„å­—ç¬¦ï¼Œä½¿ç”¨ <code>%c</code> æ ¼å¼åŒ–ï¼Œå¦‚æœè¦æŠŠ <code>rune</code> ç±»å‹è½¬ä¸º <code>string</code> ç±»å‹ï¼Œä½¿ç”¨ <code>string</code> ç±»å‹è½¬æ¢ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="type">rune</span> = <span class="string">&#x27;ğŸ˜€&#x27;</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;a: %v, %U, %c, %s\n&quot;</span>, a, a, a, <span class="type">string</span>(a))</span><br><span class="line"></span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">// a: 128512, U+1F600, ğŸ˜€, ğŸ˜€</span></span><br></pre></td></tr></table></figure><h3 id="errors-As"><a href="#errors-As" class="headerlink" title="errors.As()"></a>errors.As()</h3><p>errors.As() çš„ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªéç©ºæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå®ç°äº†erroræ¥å£çš„ç±»å‹ï¼Œæˆ–è€…æ˜¯ä»»ä½•æ¥å£ç±»å‹ã€‚å¦‚æœæ˜¯è‡ªå®šä¹‰çš„ç±»å‹ A ç”¨æŒ‡é’ˆæ¥æ”¶è€…å®ç°çš„ error æ¥å£ï¼Œä¼ å‚çš„æ—¶å€™å°±å¿…é¡»ä¼ é€’ä¸€ä¸ªåŒé‡æŒ‡é’ˆã€‚</p><p><strong>1ã€<code>go build</code>çš„æ—¶å€™æ— æ³•build</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd\app\main.go:9:2: //go:build comment without // +build comment</span><br></pre></td></tr></table></figure><p>åœ¨ç½‘ä¸Šæ²¡æœ‰æœåˆ°ç›¸å…³çš„é—®é¢˜ã€‚å¾ˆæ˜æ˜¾è¿™ä¸æ˜¯ä»£ç é”™è¯¯ï¼Œæˆ‘æ„Ÿè§‰æ˜¯æˆ‘æœ¬åœ°çš„golangç‰ˆæœ¬(1.16)ä¸é¡¹ç›®çš„ç‰ˆæœ¬(1.17)ä¸ä¸€è‡´å¯¼è‡´çš„ï¼Œäºæ˜¯æˆ‘å‡çº§äº†æˆ‘çš„golangç‰ˆæœ¬ï¼Œé—®é¢˜è§£å†³äº†ã€‚</p><h3 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h3><p>â€œå»¶è¿Ÿè°ƒç”¨çš„å‚æ•°ä¼šç«‹å³è¢«è®¡ç®—ï¼Œä½†å‡½æ•°è°ƒç”¨åœ¨å‘¨å›´çš„å‡½æ•°è¿”å›ä¹‹å‰ä¸ä¼šæ‰§è¡Œâ€ã€‚</p><p><strong>2ã€å¾€MariaDB(MySQL)é‡Œå­˜å‚¨emojiæ—¶æŠ¥é”™</strong></p><p>æŒ‰ç…§ç½‘ä¸Šè¯´çš„å·²ç»æŠŠæ•°æ®åº“å’Œè¡¨çš„å­—ç¬¦é›†ç¼–ç éƒ½è®¾ç½®ä¸ºutf8bm4å’Œè¿˜æ˜¯ä¼šæŠ¥è¿™ä¸ªé”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error 1366: Incorrect string value: &#x27;\xF0\x9F\xA4\xA1&#x27; for column `test`.`customer`.`name` at row 1</span><br></pre></td></tr></table></figure><p>æœ€åçœ‹äº†ä¸€ä¸‹è¿æ¥æ•°æ®åº“çš„URLï¼Œå‘ç°charsetçš„å€¼ä¸ºutf8ï¼ŒæŠŠcharsetçš„å€¼æ”¹ä¸ºutf8bm4å°±å¯ä»¥äº†ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root:password@tcp(localhost:3306)/databasename?parseTime=True&amp;loc=Local&amp;charset=utf8mb4&amp;collation=utf8mb4_unicode_ci</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Publish Package</title>
      <link href="/posts/d0e222da/"/>
      <url>/posts/d0e222da/</url>
      
        <content type="html"><![CDATA[<h2 id="Python-Package"><a href="#Python-Package" class="headerlink" title="Python Package"></a>Python Package</h2><h3 id="1-æ³¨å†Œ-PyPI-è´¦å·"><a href="#1-æ³¨å†Œ-PyPI-è´¦å·" class="headerlink" title="1. æ³¨å†Œ PyPI è´¦å·"></a>1. æ³¨å†Œ <a href="https://pypi.org/">PyPI</a> è´¦å·</h3><h3 id="2-å®‰è£…package"><a href="#2-å®‰è£…package" class="headerlink" title="2. å®‰è£…package"></a>2. å®‰è£…package</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install <span class="literal">--upgrade</span> build</span><br><span class="line">pip install <span class="literal">--upgrade</span> twine</span><br></pre></td></tr></table></figure><h3 id="3-åˆ›å»ºpackageæ–‡ä»¶"><a href="#3-åˆ›å»ºpackageæ–‡ä»¶" class="headerlink" title="3. åˆ›å»ºpackageæ–‡ä»¶"></a>3. åˆ›å»ºpackageæ–‡ä»¶</h3><p>packageé‡Œçš„æ–‡ä»¶åº”è¯¥è¿™æ ·ç»„ç»‡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">packaging_tutorial/</span><br><span class="line">â”œâ”€â”€ LICENSE</span><br><span class="line">â”œâ”€â”€ pyproject.toml</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ setup.cfg</span><br><span class="line">â”œâ”€â”€ src/</span><br><span class="line">â”‚Â Â  â””â”€â”€ example_package/</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ __init__.py</span><br><span class="line">â”‚Â Â      â””â”€â”€ example.py</span><br><span class="line">â””â”€â”€ tests/</span><br></pre></td></tr></table></figure><p>LICENSEï¼š<a href="https://choosealicense.com/">choosealicense</a></p><p>pyproject.tomlï¼šæ„å»ºå·¥å…·çš„é…ç½®æ–‡ä»¶</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[build-system]</span></span><br><span class="line"><span class="attr">requires</span> = [</span><br><span class="line">    <span class="string">&quot;setuptools&gt;=42&quot;</span>,</span><br><span class="line">    <span class="string">&quot;wheel&quot;</span></span><br><span class="line">]</span><br><span class="line"><span class="attr">build-backend</span> = <span class="string">&quot;setuptools.build_meta&quot;</span></span><br></pre></td></tr></table></figure><p>setup.cfgï¼šé™æ€å…ƒæ•°æ®ï¼Œé…ç½®è¿™ä¸ªpackageçš„åŸºæœ¬å±æ€§</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[metadata]</span><br><span class="line">name = example-pkg-YOUR-USERNAME-HERE</span><br><span class="line">version = 0.0.1</span><br><span class="line">author = Example Author</span><br><span class="line">author_email = author@example.com</span><br><span class="line">description = A small example package</span><br><span class="line">long_description = file: README.md</span><br><span class="line">long_description_content_type = text/markdown</span><br><span class="line">url = https://github.com/pypa/sampleproject</span><br><span class="line">project_urls =</span><br><span class="line">    Bug Tracker = https://github.com/pypa/sampleproject/issues</span><br><span class="line">classifiers =</span><br><span class="line">    Programming Language :: Python :: 3</span><br><span class="line">    License :: OSI Approved :: MIT License</span><br><span class="line">    Operating System :: OS Independent</span><br><span class="line"></span><br><span class="line">[options]</span><br><span class="line">package_dir =</span><br><span class="line">    = src</span><br><span class="line">packages = find:</span><br><span class="line">python_requires = &gt;=3.6</span><br><span class="line"></span><br><span class="line">[options.packages.find]</span><br><span class="line">where = src</span><br></pre></td></tr></table></figure><h3 id="4-ç”Ÿæˆpackage"><a href="#4-ç”Ÿæˆpackage" class="headerlink" title="4. ç”Ÿæˆpackage"></a>4. ç”Ÿæˆpackage</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">py <span class="literal">-m</span> build</span><br></pre></td></tr></table></figure><h3 id="5-ä¸Šä¼ package"><a href="#5-ä¸Šä¼ package" class="headerlink" title="5. ä¸Šä¼ package"></a>5. ä¸Šä¼ package</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">twine upload dist/*</span><br></pre></td></tr></table></figure><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://packaging.python.org/tutorials/packaging-projects/">https://packaging.python.org/tutorials/packaging-projects/</a></p><h2 id="Golang-Package"><a href="#Golang-Package" class="headerlink" title="Golang Package"></a>Golang Package</h2><p>ä»¥ GitHub ä¸ºä¾‹ï¼Œå‘å¸ƒä¸€ä¸ª module éœ€è¦åˆ›å»ºä¸€ä¸ªä»¥ <code>github.com/username/mymodule</code> ä¸ºåç§°çš„modæ–‡ä»¶ã€‚</p><p>è¿è¡Œå‘½ä»¤ä»¥åˆ›å»º <code>go.mod</code> æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod init github.com/username/mymodule</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥å¼€å§‹ç¼–å†™æ¨¡å—ã€‚</p><p>æ¨¡å—ç¼–å†™å®Œæˆä¹‹åè¿è¡Œ <code>go mod tidy</code> å’Œ <code>go test ./...</code> å‘½ä»¤ç¡®ä¿ä¸€åˆ‡æ­£å¸¸ã€‚</p><p>ç„¶åä½¿ç”¨ <code>git tag</code> å‘½ä»¤æ–°å»ºç‰ˆæœ¬å·ï¼Œå¹¶æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;mymodule: changes for v0.1.0&quot;</span></span><br><span class="line">git tag v0.1.0</span><br><span class="line">git push origin v0.1.0</span><br></pre></td></tr></table></figure><p>è¿è¡Œ <code>go list</code> å‘½ä»¤æ›´æ–°æ¨¡å—ç´¢å¼•ï¼Œä½¿æ¨¡å—å¯ç”¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GOPROXY=proxy.golang.org go list -m github.com/username/mymodule@v0.1.0</span><br></pre></td></tr></table></figure><p>å…¶ä»–å¼€å‘äººå‘˜å¯ä»¥è¿è¡Œ <code>go get</code> å‘½ä»¤å¯¼å…¥æŒ‡å®šç‰ˆæœ¬å·çš„ module</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/username/mymodule@v0.1.0</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> çŸ¥é“ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ffmpegæ¨æµ</title>
      <link href="/posts/ee0d4182/"/>
      <url>/posts/ee0d4182/</url>
      
        <content type="html"><![CDATA[<p>æŸ¥çœ‹éŸ³é¢‘è®¾å¤‡</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg <span class="literal">-list_devices</span> true <span class="operator">-f</span> dshow <span class="literal">-i</span> dummy</span><br></pre></td></tr></table></figure><p>æœ¬åœ°è§†é¢‘æ¨æµ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -re -i D:\1.mp4 -vcodec libx264 -acodec aac -f flv rtmp://localhost:1935/live/home</span><br><span class="line">ffmpeg -re -i D:\1.mp4 -c copy -f flv rtmp://localhost:1935/live/home</span><br></pre></td></tr></table></figure><p>æ¡Œé¢æ¨æµ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -f gdigrab -i desktop -vcodec libx264 -f flv rtmp://localhost:1935/live/home</span><br><span class="line">ffmpeg -f dshow -i audio=&quot;éº¦å…‹é£é˜µåˆ— (Realtek(R) Audio)&quot; -f gdigrab -i desktop -vcodec libx264 -f flv rtmp://localhost:1935/live/home</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -rtbufsize 1500M -f dshow -i audio=&quot;Microphone (Realtek High Definition Audio)&quot; -f -y -rtbufsize 100M -f gdigrab -t 00:00:30 -framerate 30 -probesize 10M -draw_mouse 1 -i desktop -c:v libx264 -r 30 -preset ultrafast -tune zerolatency -crf 25 -pix_fmt yuv420p &quot;d:\ffmpeg_testing.mp4&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ä½¿ç”¨ FFmpeg æ¨æµ</span><br><span class="line">ffmpeg -f dshow -i video=&quot;BisonCam, NB Pro&quot;:audio=&quot;éº¦å…‹é£ (2-Realtek High Definition Audio)&quot; -vcodec libx264 -acodec copy -preset:v ultrafast -tune:v zerolatency -f flv &quot;rtmp://192.168.242.60:1935/live/home&quot;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤‡å¿˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ffmpeg </tag>
            
            <tag> ç›´æ’­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux åŸºæœ¬æ“ä½œ</title>
      <link href="/posts/f328253f/"/>
      <url>/posts/f328253f/</url>
      
        <content type="html"><![CDATA[<h3 id="git"><a href="#git" class="headerlink" title="git"></a>git</h3><p><a href="https://git-scm.com/download/linux">https://git-scm.com/download/linux</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">.gitignore</span><br><span class="line">ssh -i id_rsa2 -T git@e.coding.net</span><br><span class="line">git <span class="built_in">log</span> --oneline --decorate --graph --all</span><br><span class="line">git checkout -b iss53</span><br><span class="line">git <span class="built_in">clone</span> -c http.proxy=<span class="string">&quot;127.0.0.1:10809&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠŠç§é’¥æ·»åŠ åˆ°sshagenté‡Œ</span></span><br><span class="line">ssh-agent bash</span><br><span class="line">ssh-add ~/.ssh/id_ed25519</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤</span></span><br><span class="line">ssh-add -D</span><br><span class="line">ssh-add -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨~/.ssh/æ–‡ä»¶å¤¹ä¸‹</span></span><br><span class="line"><span class="comment">#activehacker account</span></span><br><span class="line">Host github.com-activehacker</span><br><span class="line">HostName github.com</span><br><span class="line">User git</span><br><span class="line">IdentityFile ~/.ssh/id_rsa_activehacker</span><br><span class="line"></span><br><span class="line"><span class="comment">#jexchan account</span></span><br><span class="line">Host github.com-jexchan</span><br><span class="line">HostName github.com</span><br><span class="line">User git</span><br><span class="line">IdentityFile ~/.ssh/id_rsa_jexchan</span><br></pre></td></tr></table></figure><p><a href="https://gist.github.com/jexchan/2351996">https://gist.github.com/jexchan/2351996</a></p><h3 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h3><p><strong>å¼€å‘ç¯å¢ƒ</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt upgrade -y</span><br><span class="line">sudo apt install build-essential</span><br><span class="line"></span><br><span class="line">sudo apt remove build-essential</span><br><span class="line">sudo apt autoremove</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œsudoå‘½ä»¤æ—¶è‡ªåŠ¨è¾“å…¥å¯†ç </strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;password&quot;</span> | sudo -S apt update</span><br></pre></td></tr></table></figure><p><strong>å½’æ¡£æ–‡ä»¶å’Œæå–å½’æ¡£æ–‡ä»¶</strong></p><p>1ã€ä½¿ç”¨tarå½’æ¡£</p><ul><li>-cè¡¨ç¤ºåˆ›å»ºæ–°çš„å½’æ¡£æ–‡ä»¶</li><li>-fè¡¨ç¤ºå½’æ¡£æ–‡ä»¶åï¼Œè¯¥é€‰é¡¹åé¢å¿…é¡»è·Ÿä¸€ä¸ªæ–‡ä»¶åç§°ï¼Œæ–‡ä»¶åå¿…é¡»ç´§è·Ÿåœ¨-fä¹‹åå‡ºç°ï¼Œè€Œä¸”-fåº”è¯¥æ˜¯é€‰é¡¹ä¸­çš„æœ€åä¸€ä¸ª</li><li>-tå¯ä»¥åˆ—å‡ºå½’æ¡£æ–‡ä»¶ä¸­æ‰€åŒ…å«çš„æ–‡ä»¶</li><li>-væˆ–-vvå‚æ•°å¯ä»¥åœ¨å‘½ä»¤è¾“å‡ºä¸­åŠ å…¥æ›´å¤šçš„ç»†èŠ‚ä¿¡æ¯</li><li>-rå¯ä»¥å°†æ–°æ–‡ä»¶è¿½åŠ åˆ°å·²æœ‰çš„å½’æ¡£æ–‡ä»¶æœ«å°¾</li><li>-tå¯ä»¥åˆ—å‡ºå½’æ¡£æ–‡ä»¶ä¸­çš„å†…å®¹</li><li>-xå¯ä»¥å°†å½’æ¡£æ–‡ä»¶çš„å†…å®¹æå–åˆ°å½“å‰ç›®å½•</li><li>-Cå°†å½’æ¡£æ–‡ä»¶çš„å†…å®¹æå–åˆ°æŒ‡å®šç›®å½•ä¸­</li><li>-Aåˆå¹¶å¤šä¸ªtaræ–‡ä»¶</li><li>-jæŒ‡å®šå‹ç¼©æˆbunzip2æ ¼å¼ï¼›</li><li>-zæŒ‡å®šå‹ç¼©æˆgzipæ ¼å¼ï¼›</li><li>â€“lzmaæŒ‡å®šå‹ç¼©æˆlzmaæ ¼å¼</li><li>-aæˆ–â€“auto-compressé€‰é¡¹æ ¹æ®æ‰©å±•åè‡ªåŠ¨é€‰æ‹©å‹ç¼©ç®—æ³•</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tar -cf archive.tar file1 file2 file3 folder1 .. <span class="comment"># åˆ›å»ºæ–°çš„å½’æ¡£æ–‡ä»¶</span></span><br><span class="line">tar -rvf original.tar new_file <span class="comment"># å°†æ–°æ–‡ä»¶è¿½åŠ åˆ°å·²æœ‰çš„å½’æ¡£æ–‡ä»¶æœ«å°¾</span></span><br><span class="line">tar -xf archive.tar -C /path/to/extraction_directory <span class="comment"># å°†å½’æ¡£æ–‡ä»¶çš„å†…å®¹æå–åˆ°æŒ‡å®šç›®å½•ä¸­</span></span><br><span class="line">tar -xvf file.tar file1 file4 <span class="comment"># åªæå–file1å’Œfile4ï¼Œå¿½ç•¥å…¶ä»–æ–‡ä»¶</span></span><br><span class="line">tar -xf archive.tar -C /path/to/extraction_directory</span><br><span class="line">tar -Af file1.tar file2.tar <span class="comment"># åˆå¹¶å¤šä¸ªtaræ–‡ä»¶</span></span><br><span class="line">tar -f archive.tar --delete file1 file2 .. <span class="comment"># ä»å½’æ¡£ä¸­åˆ é™¤æ–‡ä»¶</span></span><br><span class="line">tar -acvf archive.tar.gz filea fileb filec <span class="comment"># æ ¹æ®æ‰©å±•åè‡ªåŠ¨é€‰æ‹©å‹ç¼©ç®—æ³•</span></span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨sshåœ¨è¿œç¨‹ä¸»æœºä¸Šæ‰§è¡Œå‘½ä»¤</strong></p><p>1ã€æ‰§è¡Œä¸€æ¡å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh mec@192.168.0.1 <span class="string">&#x27;whoami&#x27;</span></span><br></pre></td></tr></table></figure><p>2ã€æ‰§è¡Œå¤šæ¡å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh mec@192.168.0.1 <span class="string">&quot;echo user: <span class="subst">$(whoami)</span>;echo OS: <span class="subst">$(uname)</span>&quot;</span></span><br></pre></td></tr></table></figure><p><strong>é…ç½®sshæ— å¯†ç è‡ªåŠ¨ç™»å½•</strong></p><p>1ã€åœ¨æœ¬åœ°ä¸»æœºä¸Šåˆ›å»ºSSHå¯†é’¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -al ~/.ssh <span class="comment"># å¦‚æœå·²ç»å­˜åœ¨id_rsaæ–‡ä»¶å°±ä¸å¿…å†æ¬¡ç”Ÿæˆ</span></span><br><span class="line">ssh-keygen -t rsa -b 4096</span><br></pre></td></tr></table></figure><p>2ã€å°†ç”Ÿæˆçš„å…¬é’¥ä¼ ç»™è¿œç¨‹ä¸»æœºå¹¶å°†å…¶åŠ å…¥åˆ°æ–‡ä»¶<code>~/.ssh/authorized_keys</code>ä¸­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh USER@REMOTE_HOST <span class="string">&quot;cat &gt;&gt; ~/.ssh/authorized_keys&quot;</span> &lt; ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><p><strong>ä¸»æœºä¹‹é—´ä¼ è¾“æ–‡ä»¶</strong></p><p>1ã€ä½¿ç”¨sftpä¼ è¾“æ–‡ä»¶</p><p>sftp -oPort&#x3D;422 <a href="mailto:&#x75;&#x73;&#x65;&#x72;&#x40;&#x73;&#x6c;&#121;&#110;&#117;&#x78;&#x2e;&#111;&#114;&#x67;">&#x75;&#x73;&#x65;&#x72;&#x40;&#x73;&#x6c;&#121;&#110;&#117;&#x78;&#x2e;&#111;&#114;&#x67;</a></p><p>2ã€ä½¿ç”¨scpä¼ è¾“æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp filename user@remotehost:/home/path <span class="comment"># å°†æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºä¸­</span></span><br><span class="line">scp user@remotehost:/home/path/filename filename <span class="comment"># å°†è¿œç¨‹ä¸»æœºä¸­çš„æ–‡ä»¶å¤åˆ¶åˆ°å½“å‰ç›®å½•å¹¶ä½¿ç”¨ç»™å®šçš„æ–‡ä»¶å</span></span><br></pre></td></tr></table></figure><p>å¦‚æœSSHæ²¡æœ‰è¿è¡Œåœ¨ç«¯å£22ï¼Œä½¿ç”¨å’Œsftpç›¸åŒçš„è¯­æ³•ï¼Œåˆ©ç”¨é€‰é¡¹-oPortæŒ‡å®šå…¶ä»–ç«¯å£ã€‚</p><p>3ã€ä½¿ç”¨rsyncä¼ è¾“æ–‡ä»¶</p><p>rsyncå¯ä»¥åŒæ­¥ä¸åŒä½ç½®ä¸Šçš„æ–‡ä»¶å’Œç›®å½•ã€‚</p><ul><li>-aè¡¨ç¤ºè¿›è¡Œå½’æ¡£æ“ä½œ</li><li>-vï¼ˆverboseï¼‰è¡¨ç¤ºåœ¨stdoutä¸Šæ‰“å°å‡ºç»†èŠ‚ä¿¡æ¯æˆ–è¿›åº¦</li><li>-zæŒ‡å®šåœ¨ä¼ è¾“æ—¶å‹ç¼©æ•°æ®</li><li>-rå¼ºåˆ¶rsyncä»¥é€’å½’æ–¹å¼å¤åˆ¶ç›®å½•ä¸­æ‰€æœ‰çš„å†…å®¹</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rsync -av /home/slynux/data slynux@192.168.0.6:/home/backups/data</span><br><span class="line">rsync -av source_dir username@host:PATH</span><br><span class="line">rsync -av username@host:PATH destination</span><br><span class="line">rsync -av /home/test/ /home/backups <span class="comment"># å°†ä¸€ä¸ªç›®å½•ä¸­çš„å†…å®¹åŒæ­¥åˆ°å¦ä¸€ä¸ªç›®å½•</span></span><br><span class="line">rsync -av /home/test /home/backups <span class="comment"># å°†åŒ…æ‹¬ç›®å½•æœ¬èº«åœ¨å†…çš„å†…å®¹å¤åˆ¶åˆ°å¦ä¸€ä¸ªç›®å½•ä¸­</span></span><br></pre></td></tr></table></figure><p>4ã€ä½¿ç”¨ netcat ä¼ è¾“æ–‡ä»¶</p><p>æ¥æ”¶ç«¯ç­‰å¾…æ¥æ”¶æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -l -p 8080 &gt; bak.tgz</span><br></pre></td></tr></table></figure><p>å‘é€ç«¯å‘é€æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc 192.168.1.1 8080 &lt; bak.tgz</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨ SSH å®ç°ç«¯å£è½¬å‘</strong></p><p>ç«¯å£è½¬å‘å¯ä»¥å°†æ¥è‡ªæŸå°ä¸»æœºçš„IPè¿æ¥é‡å®šå‘åˆ°å¦ä¸€å°ä¸»æœºã€‚</p><p>1ã€å°†æœ¬åœ°ä¸»æœºç«¯å£8000ä¸Šçš„æµé‡è½¬å‘åˆ°<a href="http://www.kernel.orgçš„ç«¯å£80ä¸Šï¼š">www.kernel.orgçš„ç«¯å£80ä¸Šï¼š</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -L 8000:www.kernel.org:80 username@localhost</span><br></pre></td></tr></table></figure><p>2ã€å°†è¿œç¨‹ä¸»æœºç«¯å£8000ä¸Šçš„æµé‡è½¬å‘åˆ°<a href="http://www.kernel.orgçš„ç«¯å£80ä¸Šï¼š">www.kernel.orgçš„ç«¯å£80ä¸Šï¼š</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -L 8000:www.kernel.org:80 username@REMOTE_MACHINE</span><br></pre></td></tr></table></figure><p>æŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•ï¼Œä¸€æ—¦ç«¯å£è½¬å‘è®¾ç½®å®Œæ¯•ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªshellæç¤ºç¬¦ã€‚åœ¨è¿›è¡Œç«¯å£è½¬å‘çš„è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªshellå¿…é¡»ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œä»€ä¹ˆæ—¶å€™æƒ³åœæ­¢è½¬å‘ï¼Œåªéœ€è¦é€€å‡ºè¯¥shellå°±å¯ä»¥äº†ã€‚</p><p>3ã€éäº¤äº’å¼ç«¯å£è½¬å‘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -fL 8000:www.kernel.org:80 username@localhost -N</span><br></pre></td></tr></table></figure><p>-fæŒ‡å®šsshåœ¨æ‰§è¡Œå‘½ä»¤å‰è½¬å…¥åå°è¿è¡Œï¼Œ-Nå‘Šè¯‰sshæ— éœ€æ‰§è¡Œå‘½ä»¤ï¼Œåªè¿›è¡Œç«¯å£è½¬å‘ã€‚</p><p>4ã€åå‘ç«¯å£è½¬å‘</p><p>å°†è¿œç¨‹ä¸»æœºç«¯å£8000ä¸Šçš„æµé‡è½¬å‘åˆ°æœ¬åœ°ä¸»æœºçš„ç«¯å£80ä¸Šï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -R 8000:localhost:80 username@REMOTE_MACHINE</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨ cron è¿›è¡Œä»»åŠ¡è°ƒåº¦</strong></p><p>cronè¡¨é¡¹æŒ‡å®šäº†æ‰§è¡Œæ—¶é—´ä»¥åŠè¦æ‰§è¡Œçš„å‘½ä»¤ã€‚cronè¡¨ä¸­çš„æ¯ä¸€è¡Œéƒ½å®šä¹‰äº†å•æ¡å‘½ä»¤ã€‚å‘½ä»¤<br>å¯ä»¥æ˜¯è„šæœ¬æˆ–äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><p>cronè¡¨ä¸­çš„æ¯ä¸€è¡Œï¼ˆè¡¨é¡¹ï¼‰å‡ç”±6ä¸ªå­—æ®µç»„æˆï¼Œå­—æ®µä¹‹é—´ä»¥ç©ºæ ¼åˆ†éš”ï¼Œå­—æ®µä¸­çš„å¤šä¸ªå€¼ä»¥é€—å·åˆ†éš”ï¼Œå­—æ®µæŒ‰ç…§ä»¥ä¸‹é¡ºåºæ’åˆ—ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åˆ†é’Ÿï¼ˆ0ï½59ï¼‰ å°æ—¶ï¼ˆ0ï½23ï¼‰ å¤©ï¼ˆ1ï½31ï¼‰ æœˆä»½ï¼ˆ1ï½12ï¼‰ æ˜ŸæœŸä¸­çš„æŸå¤©ï¼ˆ0ï½6ï¼‰ å‘½ä»¤ï¼ˆåœ¨æŒ‡å®šæ—¶é—´æ‰§è¡Œçš„è„šæœ¬æˆ–å‘½ä»¤ï¼‰</span><br></pre></td></tr></table></figure><p>æ˜Ÿå·è¡¨ç¤ºä»»ä½•æ—¶é—´æ®µã€‚é™¤å·è¡¨ç¤ºè°ƒåº¦çš„æ—¶é—´é—´éš”ï¼ˆåœ¨åˆ†é’Ÿå­—æ®µä¸Šå‡ºç°çš„*&#x2F;5è¡¨ç¤ºæ¯éš”5åˆ†é’Ÿï¼‰ã€‚</p><p><code>crontab -e</code> å¯ç”¨äºç¼–è¾‘cronè¡¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">02 * * * * /home/slynux/test.sh <span class="comment"># åœ¨æ¯å¤©ä¸­æ¯å°æ—¶çš„ç¬¬2åˆ†é’Ÿæ‰§è¡Œè„šæœ¬test.sh</span></span><br><span class="line">00 5,6,7 * * * /home/slynux/test.sh <span class="comment"># åœ¨æ¯å¤©çš„ç¬¬5ã€6ã€7å°æ—¶æ‰§è¡Œè„šæœ¬test.sh</span></span><br><span class="line">00 */2 * * 0 /home/slynux/script.sh <span class="comment"># åœ¨å‘¨æ—¥çš„æ—¶å€™ï¼Œæ¯éš”2ä¸ªå°æ—¶æ‰§è¡Œè„šæœ¬script.sh</span></span><br><span class="line">00 02 * * * /sbin/shutdown -h <span class="comment"># åœ¨æ¯å¤©å‡Œæ™¨2ç‚¹å…³é—­è®¡ç®—æœº</span></span><br></pre></td></tr></table></figure><ul><li>-lå¯ä»¥åˆ—å‡ºå½“å‰ç”¨æˆ·çš„cronè¡¨</li><li>-rå¯ä»¥åˆ é™¤å½“å‰ç”¨æˆ·çš„cronè¡¨</li></ul><hr><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">ssh -oPort=6000 root@192.168.1.1</span><br><span class="line">ssh -p 10385  root@xxx.xxx.com</span><br><span class="line">ssh user@locahost -p 422</span><br><span class="line"><span class="comment"># æŸ¥çœ‹4222ç«¯å£æ˜¯å¦æ‰“å¼€</span></span><br><span class="line">lsof -i:4222</span><br><span class="line">netstat -nupl (UDPç±»å‹çš„ç«¯å£)</span><br><span class="line">netstat -ntpl (TCPç±»å‹çš„ç«¯å£)</span><br><span class="line">netstat -nupl | grep 3306</span><br><span class="line">netstat -ntpl | grep 15740</span><br><span class="line"><span class="comment"># è¿™ä¸ªè¡¨ç¤ºæŸ¥æ‰¾å¤„äºç›‘å¬çŠ¶æ€çš„ï¼Œç«¯å£å·ä¸º3306çš„è¿›ç¨‹</span></span><br><span class="line"></span><br><span class="line">find / -name cci-agent</span><br><span class="line"></span><br><span class="line"><span class="comment">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">chmod</span> +x /etc/rc.d/rc.local</span><br><span class="line">vim /etc/rc.d/rc.local</span><br><span class="line"></span><br><span class="line">chkconfig --add start_sunny.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">nohup</span> ./frps -c frps.ini &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"><span class="built_in">nohup</span> ./frpc -c frpc.ini &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line">vim /etc/rc.d/rc.local</span><br><span class="line"></span><br><span class="line"><span class="built_in">nohup</span> /root/logserver/hskchuantou/xxfrp/frp_0.35.1_linux_amd64/frpc -c frpc.ini &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line">poweroff</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»Ÿè®¡ä»£ç è¡Œæ•°</span></span><br><span class="line">find . | grep <span class="string">&#x27;\.c$\|\.h$&#x27;</span> | xargs <span class="built_in">wc</span> -l</span><br><span class="line"><span class="comment"># ç»Ÿè®¡ç£ç›˜ä½¿ç”¨æƒ…å†µ</span></span><br><span class="line"><span class="built_in">du</span> -sc /usr/share/* | <span class="built_in">sort</span> -nr</span><br><span class="line"><span class="built_in">du</span> -sc /usr/share/* | <span class="built_in">sort</span> -nr | more</span><br><span class="line"><span class="comment"># å°†åæ±‡ç¼–çš„ç»“æœä¿å­˜åˆ°outputæ–‡ä»¶ä¸­</span></span><br><span class="line">objdump -d myprog &gt; output</span><br><span class="line"><span class="comment"># è¾“å‡ºåˆ°æ–‡ä»¶çš„åŒæ—¶ä¹Ÿè¾“å‡ºåˆ°å±å¹•ä¸Š</span></span><br><span class="line">objdump -d myprog | <span class="built_in">tee</span> output</span><br><span class="line"><span class="comment"># timeå·¥å…·è®°å½•äº†è¿™ä¸€è¿‡ç¨‹æ‰€æ¶ˆè€—çš„æ—¶é—´</span></span><br><span class="line">time ./myprog &lt; data | <span class="built_in">tee</span> output</span><br><span class="line"><span class="comment"># /dev/nullæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶, ä»»ä½•è¯•å›¾è¾“å‡ºåˆ°å®ƒçš„ä¿¡æ¯éƒ½ä¼šè¢«ä¸¢å¼ƒ</span></span><br><span class="line">time ./myprog &lt; data &gt; /dev/null</span><br></pre></td></tr></table></figure><h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># From source code</span></span><br><span class="line">wget https://download.redis.io/releases/redis-6.2.5.tar.gz</span><br><span class="line">tar xzf redis-6.2.5.tar.gz</span><br><span class="line"><span class="built_in">cd</span> redis-6.2.5</span><br><span class="line">make</span><br><span class="line"></span><br><span class="line"><span class="comment"># From the official Ubuntu PPA</span></span><br><span class="line">sudo add-apt-repository ppa:redislabs/redis</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install redis</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run Redis</span></span><br><span class="line">src/redis-server</span><br><span class="line">src/redis-cli</span><br></pre></td></tr></table></figure><h3 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h3><p><strong>å›½å†…é•œåƒ</strong></p><p><a href="https://mirrors.ustc.edu.cn/repogen/">https://mirrors.ustc.edu.cn/repogen/</a></p><p><a href="http://mirrors.ustc.edu.cn/">http://mirrors.ustc.edu.cn/</a></p><p><a href="https://mirrors.163.com/">https://mirrors.163.com/</a></p><p><strong>dockerå›½å†…é•œåƒ</strong></p><p>vim &#x2F;etc&#x2F;docker&#x2F;daemon.json </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [</span><br><span class="line">    &quot;https://docker.mirrors.ustc.edu.cn&quot;,</span><br><span class="line">    &quot;http://hub-mirror.c.163.com&quot;,</span><br><span class="line">    &quot;https://registry.docker-cn.com&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åˆ é™¤é•œåƒ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f $(docker images | grep <span class="string">&quot;userpool&quot;</span> | awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>)</span><br><span class="line">docker rmi -f $(docker images | grep <span class="string">&quot;/test/golang-gin-app&quot;</span> | awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>)</span><br><span class="line">docker rmi -f $(docker images | grep <span class="string">&quot;none&quot;</span> | awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>)</span><br><span class="line">docker stop $(docker ps -a | grep <span class="string">&quot;Exited&quot;</span> | awk <span class="string">&#x27;&#123;print $1 &#125;&#x27;</span>)</span><br><span class="line">docker stop $(docker ps -a | grep <span class="string">&quot;Up&quot;</span> | awk <span class="string">&#x27;&#123;print $1 &#125;&#x27;</span>)</span><br><span class="line">docker <span class="built_in">rm</span> -f $(docker ps -a | grep <span class="string">&quot;Exited&quot;</span> | awk <span class="string">&#x27;&#123;print $1 &#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">docker <span class="built_in">exec</span> -it container_name bash</span><br></pre></td></tr></table></figure><h3 id="sql"><a href="#sql" class="headerlink" title="sql"></a>sql</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">su - postgres</span><br><span class="line">--- æ‰€æœ‰æ•°æ®åº“</span><br><span class="line">SELECT * FROM pg_database;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤‡ä»½</span></span><br><span class="line">pg_dumpall &gt; pg_backup.bak</span><br><span class="line">psql -f pg_backup.bak postgres</span><br><span class="line">pg_dumpall -U postgres &gt; databackup.bak</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿˜åŸ</span></span><br><span class="line">psql basicinfo2 &lt; basicinfo_20210223_171724</span><br><span class="line"></span><br><span class="line">tar -zcvf test4.tar.gz test4/    //å°†test4æ–‡ä»¶å¤¹åšä¸ºå½’æ¡£æ–‡ä»¶</span><br><span class="line">tar -zxvf test4.tar.gz  //å½’æ¡£æ–‡ä»¶è§£å‹ç¼©</span><br></pre></td></tr></table></figure><h3 id="k8s"><a href="#k8s" class="headerlink" title="k8s"></a>k8s</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line">kubectl get namespace</span><br><span class="line">kubectl get ns</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ä¸€ä¸ª shell è¿›å…¥ Pod ä¸­è¿è¡Œçš„å®¹å™¨ï¼š</span></span><br><span class="line">kubectl <span class="built_in">exec</span> -it secret-test-pod -- /bin/bash</span><br><span class="line">kubectl <span class="built_in">exec</span> -i -t env-single-secret -- /bin/sh -c <span class="string">&#x27;echo $SECRET_USERNAME&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">curl -LO https://dl.k8s.io/release/v1.20.0/bin/linux/amd64/kubectl</span><br><span class="line">install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64</span><br><span class="line">install minikube-linux-amd64 /usr/local/bin/minikube</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">kubectl <span class="built_in">exec</span> test-deployment-8697bdd6c4-sdhmm  -it bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½äºåå­—ç©ºé—´ä¸­çš„èµ„æº</span></span><br><span class="line">kubectl api-resources --namespaced=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸åœ¨åå­—ç©ºé—´ä¸­çš„èµ„æº</span></span><br><span class="line">kubectl api-resources --namespaced=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º Podï¼š</span></span><br><span class="line">kubectl apply -f memory-request-limit-3.yaml --namespace=mem-example</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ Pod çŠ¶æ€ï¼š</span></span><br><span class="line">kubectl get pod memory-demo-3 --namespace=mem-example</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ Pod æ—¥å¿—ï¼š</span></span><br><span class="line">kubectl logs &lt;podname&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å‰ä¸€ä¸ª Pod æ—¥å¿—ï¼š</span></span><br><span class="line">kubectl logs &lt;podname&gt; --previous</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ Podï¼š</span></span><br><span class="line">kubectl delete pod memory-demo-3 --namespace=mem-example</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤å‘½åç©ºé—´ã€‚ä¸‹é¢çš„å‘½ä»¤ä¼šåˆ é™¤ä½ æ ¹æ®è¿™ä¸ªä»»åŠ¡åˆ›å»ºçš„æ‰€æœ‰ Podï¼š</span></span><br><span class="line">kubectl delete namespace mem-example</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæœ‰å…³ Deployment çš„ä¿¡æ¯ï¼š</span></span><br><span class="line">kubectl get deployments hello-world</span><br><span class="line">kubectl describe deployments hello-world</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæœ‰å…³ ReplicaSet å¯¹è±¡çš„ä¿¡æ¯ï¼š</span></span><br><span class="line">kubectl get replicasets</span><br><span class="line">kubectl describe replicasets</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå…¬å¼€ Deployment çš„ Service å¯¹è±¡ï¼š</span></span><br><span class="line">kubectl expose deployment hello-world --<span class="built_in">type</span>=LoadBalancer --name=my-service</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæœ‰å…³ Service çš„ä¿¡æ¯ï¼š</span></span><br><span class="line">kubectl get services my-service</span><br><span class="line">kubectl describe services my-service</span><br><span class="line"></span><br><span class="line"><span class="comment"># podçš„å†…éƒ¨åœ°å€</span></span><br><span class="line">kubectl get pods --output=wide</span><br><span class="line">kubectl get pods -l run=my-nginx -o yaml | grep podIP</span><br><span class="line">kubectl get pods --selector=<span class="string">&quot;run=load-balancer-example&quot;</span> --output=wide</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªåŠ¨æ‰“å¼€ Hello World åº”ç”¨ç¨‹åº</span></span><br><span class="line">minikube service my-service</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤æœåŠ¡</span></span><br><span class="line">kubectl delete services my-service</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤æ­£åœ¨è¿è¡Œ Hello World åº”ç”¨ç¨‹åºçš„ Deploymentï¼ŒReplicaSet å’Œ Pod</span></span><br><span class="line">kubectl delete deployment hello-world</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º Service</span></span><br><span class="line">kubectl expose deployment/my-nginx</span><br><span class="line">service/my-nginx exposed</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ä½ çš„ Service èµ„æº:</span></span><br><span class="line">kubectl get svc my-nginx</span><br><span class="line">kubectl describe svc my-nginx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># kustomization.yaml</span></span><br><span class="line">kubectl apply -k ./</span><br><span class="line">kubectl get -k .</span><br><span class="line">kubectl delete -k ./</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º secret</span></span><br><span class="line">kubectl create secret docker-registry regcred1 --docker-server=docker.pkg.coding.net --docker-username=1112@qq.com --docker-password=123 --docker-email=<span class="built_in">test</span>@qq.com -n <span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">kubectl create secret generic harborsecret --from-file=.dockerconfigjson=/root/.docker/config.json --<span class="built_in">type</span>=kubernetes.io/dockerconfigjson</span><br><span class="line"></span><br><span class="line">kubectl create secret generic harborsecret \</span><br><span class="line">    --from-file=/root/.docker/config.json \</span><br><span class="line">    --<span class="built_in">type</span>=kubernetes.io/dockerconfigjson</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">minikube delete</span><br><span class="line">kubectl delete node --all</span><br><span class="line"><span class="built_in">rm</span> -rf /usr/local/bin/kubectl</span><br><span class="line"><span class="built_in">rm</span> -rf ~/.kube</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">port</span><br><span class="line">portæ˜¯k8sé›†ç¾¤å†…éƒ¨è®¿é—®serviceçš„ç«¯å£ï¼Œå³é€šè¿‡clusterIP: portå¯ä»¥è®¿é—®åˆ°æŸä¸ªservice</span><br><span class="line"></span><br><span class="line">nodePort</span><br><span class="line">nodePortæ˜¯å¤–éƒ¨è®¿é—®k8sé›†ç¾¤ä¸­serviceçš„ç«¯å£ï¼Œé€šè¿‡nodeIP: nodePortå¯ä»¥ä»å¤–éƒ¨è®¿é—®åˆ°æŸä¸ªserviceã€‚</span><br><span class="line"></span><br><span class="line">targetPort</span><br><span class="line">targetPortæ˜¯podçš„ç«¯å£ï¼Œä»portå’ŒnodePortæ¥çš„æµé‡ç»è¿‡kube-proxyæµå…¥åˆ°åç«¯podçš„targetPortä¸Šï¼Œæœ€åè¿›å…¥å®¹å™¨ã€‚</span><br><span class="line"></span><br><span class="line">containerPort</span><br><span class="line">containerPortæ˜¯podå†…éƒ¨å®¹å™¨çš„ç«¯å£ï¼ŒtargetPortæ˜ å°„åˆ°containerPortã€‚</span><br></pre></td></tr></table></figure><h3 id="helm"><a href="#helm" class="headerlink" title="helm"></a>helm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…</span></span><br><span class="line">curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3</span><br><span class="line"><span class="built_in">chmod</span> 700 get_helm.sh</span><br><span class="line">./get_helm.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… minio</span></span><br><span class="line">helm repo remove stable</span><br><span class="line">helm repo add stable http://mirror.azure.cn/kubernetes/charts/</span><br><span class="line">helm repo update</span><br><span class="line">helm install stable/minio --generate-name</span><br></pre></td></tr></table></figure><h3 id="k3s"><a href="#k3s" class="headerlink" title="k3s"></a>k3s</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…k3s</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½ k3s äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œk3s-airgap-images-$ARCH.tar(k3s-airgap-images-amd64.tar) taræ–‡ä»¶</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /var/lib/rancher/k3s/agent/images/</span><br><span class="line"><span class="built_in">cp</span> ./k3s-airgap-images-<span class="variable">$ARCH</span>.tar /var/lib/rancher/k3s/agent/images/</span><br><span class="line"><span class="built_in">cp</span> ./k3s /usr/local/bin/k3s</span><br><span class="line"></span><br><span class="line">wget https://get.k3s.io</span><br><span class="line"></span><br><span class="line">INSTALL_K3S_SKIP_DOWNLOAD=<span class="literal">true</span> ./install-k3s.sh</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">systemctl restart k3s</span><br><span class="line">systemctl restart k3s-agent</span><br><span class="line">service k3s restart</span><br><span class="line">service k3s-agent restart</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="k8s-service"><a href="#k8s-service" class="headerlink" title="k8s service"></a>k8s service</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kube-node-service</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">kube-node-service</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">NodePort</span>      <span class="comment">#è¿™é‡Œä»£è¡¨æ˜¯NodePortç±»å‹çš„</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">8080</span>        <span class="comment">#è¿™é‡Œçš„ç«¯å£å’ŒclusterIPå¯¹åº”ï¼Œå³ip:8080,ä¾›å†…éƒ¨è®¿é—®ã€‚</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">8080</span>  <span class="comment">#ç«¯å£ä¸€å®šè¦å’Œcontaineræš´éœ²å‡ºæ¥çš„ç«¯å£å¯¹åº”</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">nodePort:</span> <span class="number">32143</span>   <span class="comment"># æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½ä¼šå¼€æ”¾æ­¤ç«¯å£ï¼Œæ­¤ç«¯å£ä¾›å¤–éƒ¨è°ƒç”¨ã€‚</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">web</span>          <span class="comment">#è¿™é‡Œé€‰æ‹©å™¨ä¸€å®šè¦é€‰æ‹©å®¹å™¨çš„æ ‡ç­¾ï¼Œä¹‹å‰å†™name:kube-nodeæ˜¯é”™çš„ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="rancher"><a href="#rancher" class="headerlink" title="rancher"></a>rancher</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -sfL http://rancher-mirror.cnrancher.com/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn sh -</span><br><span class="line"></span><br><span class="line">k3s server  --flannel-iface enp0s3  --kube-apiserver-arg service-node-port-range=1-65535</span><br><span class="line"></span><br><span class="line">k3s agent --flannel-iface enp0s3  --server https://centos1:6443 --token K109783da72467af34e663138dd8dd99f9cc7507c08c87eea726dfe8ad934359b94::server:afa081a89a86fa3008e0754f265f1911</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name rancher3 -p 8880:80 -p 8443:443 --privileged -v /var/lib/rancher/:/var/lib/rancher/ rancher/rancher</span><br><span class="line"></span><br><span class="line">docker run --privileged -d --<span class="built_in">rm</span> -p 443:443 -v /var/lib/rancher/:/var/lib/rancher/ --name rancher rancher/rancher:stable</span><br><span class="line"></span><br><span class="line">docker run --privileged -d --restart=unless-stopped -p 80:80 -p 443:443 -v /var/lib/rancher/:/var/lib/rancher/ --name rancher rancher/rancher:stable</span><br><span class="line"></span><br><span class="line">sudo docker run --privileged -d --restart=unless-stopped -p 80:80 -p 443:443 -v /var/lib/rancher/:/var/lib/rancher/ rancher/rancher:stable</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»£ç†</span></span><br><span class="line">--proxy http://127.0.0.1:10809</span><br><span class="line"><span class="comment"># é•œåƒ</span></span><br><span class="line">--registry=https://registry.npmmirror.com</span><br><span class="line"><span class="comment"># å‡çº§npm</span></span><br><span class="line">npm install -g npm --registry=https://registry.npmmirror.com</span><br><span class="line"><span class="comment"># æ¸…ç¼“å­˜</span></span><br><span class="line">npm cache verify</span><br><span class="line">npm cache clean --force</span><br><span class="line">npm uninstall *</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ— æ³•åŠ è½½æ–‡ä»¶ ******.ps1ï¼Œå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸­ç¦æ­¢æ‰§è¡Œè„šæœ¬ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… &quot;get-help about_signing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œ PowerShell</span></span><br><span class="line"><span class="built_in">set-executionpolicy</span> remotesigned</span><br><span class="line">Y</span><br></pre></td></tr></table></figure><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ€æ­»è¿›ç¨‹</span></span><br><span class="line">taskkill /F /im Xshell.exe</span><br><span class="line"><span class="comment"># æ ‘å½¢æ–‡ä»¶åˆ—è¡¨</span></span><br><span class="line">tree /F</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wget -c https://go.dev/dl/go1.17.6.linux-amd64.tar.gz</span><br><span class="line"><span class="built_in">rm</span> -rf /usr/local/go &amp;&amp; tar -C /usr/local -xzf go1.17.6.linux-amd64.tar.gz</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/local/go/bin</span><br><span class="line">go version</span><br><span class="line"></span><br><span class="line"><span class="comment"># linux</span></span><br><span class="line">SET CGO_ENABLED=0</span><br><span class="line">SET GOOS=linux</span><br><span class="line">SET GOARCH=amd64</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»£ç†</span></span><br><span class="line">go <span class="built_in">env</span> -w GO111MODULE=on</span><br><span class="line">go <span class="built_in">env</span> -w GOPROXY=https://goproxy.cn,direct</span><br></pre></td></tr></table></figure><h3 id="Edge"><a href="#Edge" class="headerlink" title="Edge"></a>Edge</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">### æŸ¥çœ‹åŒæ­¥è®¾ç½®</span><br><span class="line">edge://sync-internals/</span><br></pre></td></tr></table></figure><h3 id="PostgreSQL"><a href="#PostgreSQL" class="headerlink" title="PostgreSQL"></a>PostgreSQL</h3><p>åœ¨ PostgreSQL ä¸­ç»™ä¸€èˆ¬ç”¨æˆ·ä½¿ç”¨çš„å­—ç¬¦ç±»å‹æœ‰ä¸‰ç§</p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>character varying(n), varchar(n)</td><td>æœ‰é™åˆ¶çš„å˜é•¿</td></tr><tr><td>character(n), char(n)</td><td>å®šé•¿ï¼Œç©ºæ ¼å¡«å……</td></tr><tr><td>text</td><td>æ— é™å˜é•¿</td></tr></tbody></table><p><code>varchar(n)</code> å’Œ <code>char(n)</code> åˆ†åˆ«æ˜¯ <code>character varying(n)</code> å’Œ <code>character(n)</code> çš„åˆ«åã€‚</p><p>æœ‰é•¿åº¦å£°æ˜è¯çš„ <code>character varying(n)</code> æˆ–è€… <code>character(n)</code> é‚£ä¹ˆè¶…é•¿çš„å€¼å°†è¢«æˆªæ–­æˆnä¸ªå­—ç¬¦ï¼Œè€Œä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼ˆè¿™ä¹Ÿæ˜¯SQLæ ‡å‡†çš„è¦æ±‚ï¼‰ã€‚</p><p>æ²¡æœ‰é•¿åº¦å£°æ˜è¯çš„ <code>character</code> ç­‰æ•ˆäº <code>character(1)</code> ã€‚</p><p>æ²¡æœ‰é•¿åº¦å£°æ˜è¯çš„ <code>character varying</code> ï¼Œé‚£ä¹ˆè¯¥ç±»å‹æ¥å—ä»»ä½•é•¿åº¦çš„ä¸²ã€‚</p><p>è¿™äº›ç±»å‹çš„å­˜å‚¨éœ€æ±‚æ˜¯ 4 å­—èŠ‚åŠ ä¸Šå®é™…çš„å­—ä¸²ï¼Œå¦‚æœæ˜¯ <code>character</code> çš„è¯å†åŠ ä¸Šå¡«å……çš„å­—èŠ‚ã€‚</p><p>ä¸ç®¡æ€æ ·ï¼Œå…è®¸å­˜å‚¨çš„æœ€é•¿å­—ä¸²å¤§æ¦‚æ˜¯ 1 GBã€‚</p><p>å¦‚æœä½ æƒ³è¦å­˜å‚¨æ²¡æœ‰æŒ‡å®šä¸Šé™çš„é•¿ä¸²ï¼Œä½¿ç”¨ <code>text</code> æˆ–æ²¡æœ‰é•¿åº¦å£°æ˜çš„ <code>character varying</code> ï¼Œè€Œä¸æ˜¯ç»™å‡ºä¸€ä¸ªä»»æ„é•¿åº¦é™åˆ¶ï¼‰ã€‚</p><p>è¿™ä¸‰ç§ç±»å‹ä¹‹é—´æ²¡æœ‰æ€§èƒ½å·®åˆ«ï¼Œåªä¸è¿‡æ˜¯åœ¨ä½¿ç”¨å¡«å……ç©ºç™½çš„ç±»å‹çš„æ—¶å€™éœ€è¦æ›´å¤šå­˜å‚¨å°ºå¯¸ï¼Œä»¥åŠåœ¨å­˜å‚¨åˆ°ä¸€ä¸ªæœ‰é•¿åº¦çº¦æŸçš„åˆ—æ—¶éœ€è¦å°‘é‡é¢å¤–CPUå‘¨æœŸæ¥æ£€æŸ¥é•¿åº¦ã€‚è™½ç„¶åœ¨æŸäº›å…¶å®ƒçš„æ•°æ®åº“ç³»ç»Ÿé‡Œï¼Œ<code>character(n)</code> æœ‰ä¸€å®šçš„æ€§èƒ½ä¼˜åŠ¿ï¼Œä½†åœ¨ PostgreSQL é‡Œæ²¡æœ‰ã€‚äº‹å®ä¸Šï¼Œ<code>character(n)</code> é€šå¸¸æ˜¯è¿™ä¸‰ç§ç±»å‹ä¹‹ä¸­æœ€æ…¢çš„ä¸€ä¸ªï¼Œå› ä¸ºå®ƒéœ€è¦é¢å¤–çš„å­˜å‚¨å¼€é”€ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”è¯¥ä½¿ç”¨ <code>text</code> æˆ–è€… <code>character varying</code> ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤‡å¿˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> sql </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ªè´´æ¿ğŸ“‹</title>
      <link href="/posts/b3869c18/"/>
      <url>/posts/b3869c18/</url>
      
        <content type="html"><![CDATA[<h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t ed25519 -C &quot;johndoe@example.com&quot;</span><br><span class="line">ssh -i ~/.ssh/id_ed25519 -T git@github.com</span><br><span class="line">git config --global user.name &quot;John Doe&quot;</span><br><span class="line">git config --global user.email johndoe@example.com</span><br><span class="line">git config core.sshCommand &#x27;ssh -i ~/.ssh/id_ed25519_work -o IdentitiesOnly=yes&#x27;</span><br><span class="line">git config --global http.proxy http://127.0.0.1:7890</span><br><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br><span class="line">git -c http.proxy=socks5h://127.0.0.1:7890 clone &lt;git-url&gt;</span><br></pre></td></tr></table></figure><h3 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">    HostName ssh.github.com</span><br><span class="line">    User git</span><br><span class="line">    Port 443</span><br><span class="line">    ProxyCommand &#x27;C:\Program Files\Git\mingw64\bin\connect.exe&#x27; -S 127.0.0.1:7890 %h %p # Windows</span><br><span class="line">    ProxyCommand nc -v -x 127.0.0.1:7890 %h %p # macOS</span><br></pre></td></tr></table></figure><h3 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æˆªå–éŸ³é¢‘</span></span><br><span class="line">ffmpeg -i input.mp3 -ss 00:00:10 -t 00:00:20 output.mp3</span><br></pre></td></tr></table></figure><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p><strong>go</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go env -w GO111MODULE=on</span><br><span class="line">go env -w GOPROXY=https://goproxy.cn,direct</span><br></pre></td></tr></table></figure><p><strong>brew</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890</span><br><span class="line">/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;</span><br><span class="line">(echo; echo &#x27;eval &quot;$(/opt/homebrew/bin/brew shellenv)&quot;&#x27;) &gt;&gt; ~/.zprofile</span><br><span class="line">eval &quot;$(/opt/homebrew/bin/brew shellenv)&quot;</span><br><span class="line">echo &#x27;# Set PATH, MANPATH, etc., for Homebrew.&#x27; &gt;&gt; ~/.zprofile</span><br><span class="line">echo &#x27;export HOMEBREW_BREW_GIT_REMOTE=&quot;https://mirrors.ustc.edu.cn/brew.git&quot;&#x27; &gt;&gt; ~/.zprofile</span><br><span class="line">echo &#x27;export HOMEBREW_CORE_GIT_REMOTE=&quot;https://mirrors.ustc.edu.cn/homebrew-core.git&quot;&#x27; &gt;&gt; ~/.zprofile</span><br><span class="line">export HOMEBREW_BREW_GIT_REMOTE=&quot;https://mirrors.ustc.edu.cn/brew.git&quot;</span><br><span class="line">export HOMEBREW_CORE_GIT_REMOTE=&quot;https://mirrors.ustc.edu.cn/homebrew-core.git&quot;</span><br></pre></td></tr></table></figure><p><strong>mac mysql, redis</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">brew install mysql</span><br><span class="line">brew services start mysql</span><br><span class="line">mysql_secure_installation</span><br><span class="line">mysql -u root -p</span><br><span class="line"></span><br><span class="line">brew install redis</span><br><span class="line">brew services start redis</span><br><span class="line">brew services stop redis</span><br></pre></td></tr></table></figure><p><strong>npm</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm config set strict-ssl false</span><br><span class="line">npm install --proxy http://127.0.0.1:1080</span><br><span class="line">npm install --registry https://registry.npm.taobao.org</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…¨å±€è®¾ç½®npmçš„http,httpsä»£ç†</span></span><br><span class="line">npm config set proxy http://proxy_host:port</span><br><span class="line">npm config set proxy http://username:password@proxy.us.company:port</span><br><span class="line">npm config set https-proxy https://proxy.company.com:8080</span><br><span class="line">npm config set https-proxy http://username:password@proxy.us.company:port</span><br></pre></td></tr></table></figure><p><strong>python</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pip -U</span><br><span class="line">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple some-package</span><br><span class="line">pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><p><strong>rust</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">export RUSTUP_DIST_SERVER=https://mirrors.ustc.edu.cn/rust-static</span><br><span class="line">export RUSTUP_UPDATE_ROOT=https://mirrors.ustc.edu.cn/rust-static/rustup</span><br><span class="line">curl https://sh.rustup.rs -sSf | sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">vim ~/.cargo/config</span></span><br><span class="line">[source.crates-io]</span><br><span class="line">replace-with = &#x27;ustc&#x27;</span><br><span class="line"></span><br><span class="line">[source.ustc]</span><br><span class="line">registry = &quot;git://mirrors.ustc.edu.cn/crates.io-index&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">end</span></span><br><span class="line"></span><br><span class="line">source $HOME/.cargo/env</span><br></pre></td></tr></table></figure><p><strong>docker</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">vim /etc/docker/daemon.json</span></span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [</span><br><span class="line">    &quot;https://docker.mirrors.ustc.edu.cn&quot;,</span><br><span class="line">    &quot;http://hub-mirror.c.163.com&quot;,</span><br><span class="line">    &quot;https://registry.docker-cn.com&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">end</span></span><br><span class="line"></span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><p><strong>Ubuntu</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt upgrade -y</span><br><span class="line">sudo apt install build-essential</span><br><span class="line"></span><br><span class="line">sudo apt remove build-essential</span><br><span class="line">sudo apt autoremove</span><br></pre></td></tr></table></figure><h3 id="ç½‘å€"><a href="#ç½‘å€" class="headerlink" title="ç½‘å€"></a>ç½‘å€</h3><p><strong>trackers</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://cdn.jsdelivr.net/gh/ngosang/trackerslist/trackers_best.txt</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤‡å¿˜ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Git ä½¿ç”¨æ€»ç»“</title>
      <link href="/posts/e90cddc/"/>
      <url>/posts/e90cddc/</url>
      
        <content type="html"><![CDATA[<h3 id="Git-é…ç½®"><a href="#Git-é…ç½®" class="headerlink" title="Git é…ç½®"></a>Git é…ç½®</h3><p>æŸ¥çœ‹ Git çš„é…ç½®æ‰€åœ¨æ–‡ä»¶ï¼š<code>git config --list --show-origin</code>.</p><p>Git çš„é…ç½®ä¿¡æ¯å­˜å‚¨åœ¨å››ä¸ªåœ°æ–¹ï¼š</p><ul><li>ç³»ç»Ÿçº§ï¼š<code>&lt;Git å®‰è£…è·¯å¾„&gt;/etc/gitconfig</code></li><li>ç”¨æˆ·çº§ï¼š<code>~/.gitconfig</code></li><li>ä»“åº“çº§ï¼šä»“åº“æ ¹ç›®å½•ä¸‹çš„ <code>.git/config</code></li><li>å·¥ä½œæ ‘çº§ï¼šä»“åº“æ ¹ç›®å½•ä¸‹çš„ <code>.git/config.worktree</code></li></ul><p>é…ç½®ä¼˜å…ˆçº§ï¼šå·¥ä½œæ ‘çº§ &gt; ä»“åº“çº§ &gt; ç”¨æˆ·çº§ &gt; ç³»ç»Ÿçº§ã€‚</p><p>ä½¿ç”¨ <code>git config</code> å‘½ä»¤è¯»å–å’Œå†™å…¥é…ç½®çš„æ—¶å€™åŠ ä¸Š <code>--system</code>, <code>--global</code>, <code>--local</code>, <code>--worktree</code> é€‰é¡¹å¯å®ç°ä¸åŒçº§åˆ«çš„é…ç½®ã€‚</p><h3 id="Git-å¸¸ç”¨å‘½ä»¤"><a href="#Git-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="Git å¸¸ç”¨å‘½ä»¤"></a>Git å¸¸ç”¨å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t ed25519 -C <span class="string">&quot;your_email@example.com&quot;</span></span><br><span class="line">ssh -i ~/.ssh/id_ed25519 -T git@github.com</span><br><span class="line"></span><br><span class="line">git config --global user.name <span class="string">&quot;John Doe&quot;</span></span><br><span class="line">git config --global user.email johndoe@example.com</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> -c core.sshCommand=<span class="string">&quot;ssh -i ~\\.ssh\\id_ed25519&quot;</span> git@github.com:xxx/xxx.git</span><br><span class="line">git config user.name <span class="string">&quot;John Doe work&quot;</span></span><br><span class="line">git config user.email johndoe_work@example.com</span><br><span class="line">git config core.sshCommand <span class="string">&#x27;ssh -i ~/.ssh/id_ed25519 -o IdentitiesOnly=yes&#x27;</span></span><br><span class="line"></span><br><span class="line">git config --list</span><br><span class="line">git config --system --list</span><br><span class="line">git config --global --list</span><br></pre></td></tr></table></figure><h3 id="Github-é…ç½®"><a href="#Github-é…ç½®" class="headerlink" title="Github é…ç½®"></a>Github é…ç½®</h3>]]></content>
      
      
      <categories>
          
          <category> çŸ¥é“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼€å‘ç¯å¢ƒé—®é¢˜</title>
      <link href="/posts/f809efe8/"/>
      <url>/posts/f809efe8/</url>
      
        <content type="html"><![CDATA[<p>æŒç»­æ›´æ–°â€¦</p><p><strong>Ubuntuç¯å¢ƒ</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">https://mirrors.ustc.edu.cn/help/ubuntu.html</span><br><span class="line">https://mirrors.ustc.edu.cn/repogen/</span><br><span class="line">cp /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line">sed -i &#x27;s/archive.ubuntu.com/mirrors.ustc.edu.cn/g&#x27; /etc/apt/sources.list</span><br><span class="line">apt-get update</span><br></pre></td></tr></table></figure><p><strong>Dockerç¯å¢ƒ</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://get.daocloud.io/#install-docker</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove docker docker-engine</span><br><span class="line">rm -fr /var/lib/docker/</span><br><span class="line">curl -sSL https://get.daocloud.io/docker | sh</span><br><span class="line">curl -L https://get.daocloud.io/docker/compose/releases/download/v2.7.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose</span><br><span class="line">chmod +x /usr/local/bin/docker-compose</span><br><span class="line">vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;http://hub-mirror.c.163.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://registry.docker-cn.com&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>Goç¯å¢ƒ</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wget</span> https://dl.google.com/go/go1.xx.x.linux<span class="literal">-amd64</span>.tar.gz</span><br><span class="line"><span class="built_in">rm</span> <span class="literal">-rf</span> /usr/local/go &amp;&amp; tar <span class="literal">-C</span> /usr/local <span class="literal">-xzf</span> go1.xx.x.linux<span class="literal">-amd64</span>.tar.gz</span><br><span class="line">export PATH=<span class="variable">$PATH:</span>/usr/local/go/bin</span><br><span class="line">export PATH=<span class="variable">$PATH:</span>/home/lx/go/bin</span><br><span class="line"></span><br><span class="line">mkdir D:\Cache\go\gobuildcache</span><br><span class="line">mkdir D:\Cache\go\gomodcache\pkg\mod</span><br><span class="line">go env <span class="literal">-w</span> GO111MODULE=on</span><br><span class="line">go env <span class="literal">-w</span> GOPROXY=https://goproxy.cn,direct</span><br><span class="line">go env <span class="literal">-w</span> GOCACHE=D:\Cache\go\gobuildcache</span><br><span class="line">go env <span class="literal">-w</span> GOMODCACHE=D:\Cache\go\gomodcache\pkg\mod</span><br><span class="line">go install github.com/grpc<span class="literal">-ecosystem</span>/grpc<span class="literal">-gateway</span>/v2/protoc<span class="literal">-gen-grpc-gateway</span>@latest</span><br><span class="line">go install github.com/grpc<span class="literal">-ecosystem</span>/grpc<span class="literal">-gateway</span>/v2/protoc<span class="literal">-gen-openapiv2</span>@latest</span><br><span class="line">go install google.golang.org/protobuf/cmd/protoc<span class="literal">-gen-go</span>@latest</span><br><span class="line">go install google.golang.org/grpc/cmd/protoc<span class="literal">-gen-go-grpc</span>@latest</span><br><span class="line">go install github.com/envoyproxy/protoc<span class="literal">-gen-validate</span>@latest</span><br><span class="line">go install github.com/bufbuild/buf/cmd/buf@latest</span><br><span class="line">go install github.com/kyleconroy/sqlc/cmd/sqlc@latest</span><br><span class="line">go install github.com/google/wire/cmd/wire@latest</span><br><span class="line">go install <span class="literal">-tags</span> <span class="string">&#x27;postgres&#x27;</span> github.com/golang<span class="literal">-migrate</span>/migrate/v4/cmd/migrate@latest</span><br></pre></td></tr></table></figure><p><strong>Rustç¯å¢ƒ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export RUSTUP_DIST_SERVER=https://mirrors.ustc.edu.cn/rust-static</span><br><span class="line">export RUSTUP_UPDATE_ROOT=https://mirrors.ustc.edu.cn/rust-static/rustup</span><br><span class="line">curl https://sh.rustup.rs -sSf | sh</span><br><span class="line">source &quot;$HOME/.cargo/env&quot;</span><br></pre></td></tr></table></figure><p><code>.cargo/config</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[source.crates-io]</span><br><span class="line">replace-with = &#x27;ustc&#x27;</span><br><span class="line"></span><br><span class="line">[source.ustc]</span><br><span class="line">registry = &quot;git://mirrors.ustc.edu.cn/crates.io-index&quot;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤‡å¿˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºä¸­ä½¿ç”¨äº‘å‡½æ•°</title>
      <link href="/posts/eb2d16a8/"/>
      <url>/posts/eb2d16a8/</url>
      
        <content type="html"><![CDATA[<p>å¾®ä¿¡å°ç¨‹åºå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/">https://developers.weixin.qq.com/miniprogram/dev/framework/</a></p><h3 id="å¼€å‘ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒ" class="headerlink" title="å¼€å‘ç¯å¢ƒ"></a>å¼€å‘ç¯å¢ƒ</h3><p>å®‰è£…CloudBaseäº‘å¼€å‘ç¯å¢ƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g @cloudbase/cli --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><blockquote><p><a href="https://docs.cloudbase.net/cli-v1/quick-start.html">å¿«é€Ÿå¼€å§‹ | äº‘å¼€å‘ CloudBase - ä¸€ç«™å¼åç«¯äº‘æœåŠ¡</a></p></blockquote><p>ç™»å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcb login --apiKeyId xxx --apiKey xxx</span><br></pre></td></tr></table></figure><p>åˆ›å»ºé¡¹ç›®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tcb new xxx node-starter <span class="comment"># åˆ›å»ºé¡¹ç›®</span></span><br><span class="line"><span class="built_in">cd</span> xxx <span class="comment"># è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹</span></span><br><span class="line"></span><br><span class="line">tcb fn list</span><br></pre></td></tr></table></figure><p>äº‘å‡½æ•°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‘å¸ƒäº‘å‡½æ•°</span></span><br><span class="line">tcb fn deploy nodeapp2 <span class="comment"># åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼ˆcloudbaserc.json æ‰€åœ¨ç›®å½•ï¼‰è¿è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹äº‘å‡½æ•°åˆ—è¡¨</span></span><br><span class="line">tcb fn list</span><br><span class="line">cloudbase <span class="built_in">functions</span>:list</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º HTTP è®¿é—®æœåŠ¡åœ°å€</span></span><br><span class="line">tcb service create -p /nodeapp234 -f nodeapp2</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥è¯¢ HTTP è®¿é—®æœåŠ¡ä¿¡æ¯</span></span><br><span class="line">tcb service list</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ http è®¿é—®æœåŠ¡</span></span><br><span class="line">tcb service delete -p /nodeapp234</span><br></pre></td></tr></table></figure><p>åœ¨äº‘å‡½æ•°ç›®å½•ä¸‹å®‰è£…sdk</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¾®ä¿¡äº‘å¼€å‘ SDK</span></span><br><span class="line">npm install --save wx-server-sdk@latest --registry=https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line"><span class="comment"># Cloudbase Server Node.js SDK</span></span><br><span class="line">npm install --save @cloudbase/node-sdk --registry=https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¶ä»–åŒ…</span></span><br><span class="line">npm i jsonexport --registry=https://registry.npm.taobao.org</span><br><span class="line">npm i adm-zip --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><p>äº‘å‡½æ•°ç¯å¢ƒåˆå§‹åŒ–ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">const</span> tcb = <span class="built_in">require</span>(<span class="string">&#x27;@cloudbase/node-sdk&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = tcb.<span class="title function_">init</span>(&#123;</span><br><span class="line"><span class="attr">env</span>: tcb.<span class="property">SYMBOL_CURRENT_ENV</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æœåŠ¡ç«¯ç¯å¢ƒåˆå§‹åŒ–ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> tcb = <span class="built_in">require</span>(<span class="string">&quot;@cloudbase/node-sdk&quot;</span>);</span><br><span class="line"><span class="comment">// envå¦‚æœä¸æŒ‡å®šå°†ä½¿ç”¨é»˜è®¤ç¯å¢ƒ</span></span><br><span class="line"><span class="keyword">const</span> app = tcb.<span class="title function_">init</span>(&#123;</span><br><span class="line">  <span class="attr">secretId</span>: <span class="string">&quot;xxxxx&quot;</span>,</span><br><span class="line">  <span class="attr">secretKey</span>: <span class="string">&quot;xxxx&quot;</span>,</span><br><span class="line">  <span class="attr">env</span>: <span class="string">&quot;xxx&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ›´æ–°é¡¹ç›®é…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–° app å‡½æ•°çš„é…ç½®</span></span><br><span class="line">tcb fn config update app</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°é…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰å‡½æ•°çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line">tcb fn config update</span><br></pre></td></tr></table></figure><p>æ›´æ–° å‡½æ•°ä»£ç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–° app å‡½æ•°çš„ä»£ç </span></span><br><span class="line">tcb fn code update app</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–vueé¡¹ç›®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli --registry=https://registry.npm.taobao.org</span><br><span class="line">vue create my-project</span><br><span class="line">npm install vuex --save --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
            <tag> äº‘å‡½æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ¶ä½œè´´çº¸</title>
      <link href="/posts/1d15c7b5/"/>
      <url>/posts/1d15c7b5/</url>
      
        <content type="html"><![CDATA[<p>åˆ¶ä½œè´´çº¸å¹¶å‘å¸ƒåˆ°Stickers Botã€‚</p><span id="more"></span><p>é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªç”»å¸ƒï¼Œåç§°è‡ªå®šä¹‰ã€‚é¢„è®¾çš„å®½åº¦æœ€å¥½æ˜¯512çš„å€æ•°ã€‚</p><p><img src="/../img/20200620/1.png" alt="1"></p><p>é€‰æ‹©åˆ‡ç‰‡é€‰æ‹©å·¥å…·</p><p><img src="/../img/20200620/2.png" alt="2"></p><p>é€‰ä¸­ç”»å¸ƒä¹‹åï¼Œç‚¹å‡»åˆ’åˆ†</p><p><img src="/../img/20200620/3.png" alt="3"></p><p>åˆ’åˆ†åˆ‡ç‰‡çš„æ—¶å€™ï¼Œæ°´å¹³åˆ’åˆ†çš„ä¸ªæ•°æœ€å¥½æ˜¯512çš„å€æ•°</p><p><img src="/../img/20200620/4.png" alt="4"></p><p>æ–°å»ºä¸€ä¸ªå›¾å±‚ï¼Œåˆ¶ä½œè´´çº¸</p><p><img src="/../img/20200620/5.png" alt="5"></p><p>åœ¨æ–‡ä»¶ä¸‹æ‹‰é€‰é¡¹ä¸­ï¼Œç‚¹å‡»å­˜å‚¨ä¸ºWebæ‰€ç”¨æ ¼å¼</p><p><img src="/../img/20200620/6.png" alt="6"></p><p>é¢„è®¾å»ºè®®ä½¿ç”¨PNG-24ï¼Œé€æ˜åº¦æ ¹æ®è‡ªå·±é€‰æ‹©æ˜¯å¦å‹¾é€‰</p><p><img src="/../img/20200620/7.png" alt="7"></p><p>æœ€åä¿å­˜ï¼Œé€‰æ‹©ä¿å­˜æ‰€æœ‰åˆ‡ç‰‡æ—¶ï¼Œæ–‡ä»¶åä¼šä»¥æ•°å­—çš„å½¢å¼é€’å¢æ˜¾ç¤º</p><p><img src="/../img/20200620/8.png" alt="8"></p><p>è´´çº¸åˆ¶ä½œå®Œæˆä¹‹åï¼Œåœ¨<a href="https://t.me/Stickers">@Stickers</a>ä¸­è¾“å…¥<code>/newpack</code>ï¼Œç»™è´´çº¸å–ä¸€ä¸ªåå­—ï¼Œç„¶åæ·»åŠ å¹¶æè¿°è´´çº¸ï¼Œæ·»åŠ å®Œæˆä¹‹åè¾“å…¥<code>/publish</code>å‘å¸ƒè´´çº¸ï¼Œæœ€åè‡ªå®šä¹‰è´´çº¸çš„é“¾æ¥ï¼Œå®Œæˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> çŸ¥é“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Sticker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç•ªå‰§æ¨è</title>
      <link href="/posts/70fc6f6f/"/>
      <url>/posts/70fc6f6f/</url>
      
        <content type="html"><![CDATA[<p>æ¨èä¸€äº›è½»æ¾æç¬‘çš„ç•ªå‰§ï¼Œæ’åä¸åˆ†å‰åï¼Œæƒ³åˆ°å“ªå†™åˆ°å“ªã€‚</p><span id="more"></span><p><a href="">å¥³é«˜ä¸­ç”Ÿçš„æ— æ‰€äº‹äº‹</a></p><p><a href="">é‚ªç¥ä¸å¨äºŒç—…å°‘å¥³</a></p><p><a href="">çˆç™¾ç’ƒçš„å •è½</a></p><p><a href="">endro~</a></p><p><a href="">åƒç»ªçš„é€šå­¦è·¯</a></p><p><a href="">è¡—è§’é­”æ—</a></p><p><a href="">è¾‰å¤œå¤§å°å§æƒ³è®©æˆ‘å‘Šç™½</a></p><p><a href="">å¤©ä½¿é™ä¸´åˆ°æˆ‘èº«è¾¹</a></p><p><a href="">è¶…èƒ½åŠ›å¥³å„¿</a></p><p><a href="">å¾’ç„¶å–œæ¬¢ä½ </a></p><p><a href="">ç”·å­é«˜ä¸­ç”Ÿçš„æ—¥å¸¸</a></p><p><a href="">ç¬¨è›‹æµ‹éªŒå¬å”¤å…½</a></p><p><a href="">è¿™ä¸ªç¾æœ¯ç¤¾å¤§æœ‰é—®é¢˜ï¼</a></p><p><a href="">æ—¥å¸¸ç³»çš„å¼‚èƒ½æˆ˜æ–—</a></p><p><a href="">æ—¥å¸¸</a></p><p><a href="">çŒ«å’ªæ—¥å¸¸</a></p><p><a href="">æ‚ å“‰æ—¥å¸¸å¤§ç‹</a></p><p><a href="">ä¸ºç¾å¥½çš„ä¸–ç•ŒçŒ®ä¸Šç¥ç¦</a></p><p><a href="">ä¸–ç•Œå¾æœ è°‹ç•¥ä¹‹æ˜Ÿ</a></p><p><a href="">å¥³ä»†å’–å•¡å…</a></p><p><a href="">æˆ‘å¥³å‹ä¸é’æ¢…ç«¹é©¬çš„æƒ¨çƒˆä¿®ç½—åœº</a></p><p><a href="">WWW.è¿·ç³Šé¤å…</a></p><p>æœªå®Œå¾…ç»­~</p>]]></content>
      
      
      <categories>
          
          <category> å¤‡å¿˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Anime </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é…ç½® Jupyter æœåŠ¡è¿œç¨‹è®¿é—®</title>
      <link href="/posts/bb5e666d/"/>
      <url>/posts/bb5e666d/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æœ¬æœºå¼€å¯äº†<code>jupyter</code>ä¹‹åé»˜è®¤æ˜¯æ— æ³•è¿œç¨‹è®¿é—®çš„ï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚</p><span id="more"></span><p>å®‰è£…ç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -m pip install --upgrade pip</span><br><span class="line">pip install jupyterlab</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆé…ç½®æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --generate-config</span><br></pre></td></tr></table></figure><p>è®¾ç½®å¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook password</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹<code>jupyter_notebook_config.py</code>é…ç½®æ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">## Whether to allow the user to run the notebook as root.</span></span><br><span class="line">c.NotebookApp.allow_root = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å…è®¸ä»»ä½•ip.</span></span><br><span class="line">c.NotebookApp.ip = <span class="string">&#x27;0.0.0.0&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## é»˜è®¤æ‰“å¼€ä½ç½®.</span></span><br><span class="line">c.NotebookApp.notebook_dir = <span class="string">u&#x27;C:/Users/Documents/jupyter&#x27;</span></span><br><span class="line"></span><br><span class="line">c.NotebookApp.open_browser = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## è®¾ç½®ç«¯å£å·.</span></span><br><span class="line">c.NotebookApp.port = <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨å¯†ç ç™»å½•</span></span><br><span class="line">c.NotebookApp.allow_password_change = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  When disabled, equations etc. will appear as their untransformed TeX source.</span></span><br><span class="line">c.NotebookApp.enable_mathjax = <span class="literal">True</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯åŠ¨<code>jupyter</code>æœåŠ¡ï¼š<code>jupyter lab</code>ï¼Œåªéœ€è¦notebookï¼š<code>jupyter notebook</code>ã€‚</p><blockquote><p>å‚è€ƒï¼š<a href="https://jupyter-notebook.readthedocs.io/en/stable/public_server.html">å®˜æ–¹æ–‡æ¡£</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å¤‡å¿˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jupyter </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscodeè¿œç¨‹å¼€å‘é…ç½®</title>
      <link href="/posts/448ef873/"/>
      <url>/posts/448ef873/</url>
      
        <content type="html"><![CDATA[<p><em>å¼€å‘ç¯å¢ƒï¼šæœ¬åœ°Windows10ï¼Œè¿œç¨‹Centos7ã€‚</em></p><span id="more"></span><p>æœ¬åœ°éœ€è¦å®‰è£…çš„è½¯ä»¶ï¼š<a href="https://code.visualstudio.com/">vscode</a>, <a href="https://npm.taobao.org/mirrors/git-for-windows/">git</a>ï¼Œgitå®˜ç½‘çš„å®‰è£…åŒ…ä¸‹è½½å¤ªæ…¢ï¼Œç”¨æ·˜å®çš„é•œåƒä¸‹è½½ï¼Œé€‰æœ€æ–°ç‰ˆå°±è¡Œã€‚</p><p>è¿œç¨‹æœåŠ¡å™¨éœ€è¦å®‰è£…çš„è½¯ä»¶ï¼šgit, ssh-server, ç”±äºæˆ‘çš„è¿œç¨‹æœåŠ¡å™¨æ˜¯Linuxç³»ç»Ÿï¼Œgitå’Œsshéƒ½å·²ç»æœ‰äº†ï¼Œè·³è¿‡ã€‚</p><p>1.å…ˆåœ¨Centosä¸ŠæŸ¥çœ‹gitçš„ç‰ˆæœ¬ï¼š<code>git --version</code>ï¼Œå¦‚æœæ˜¯1.xå°±éœ€è¦å…ˆå‡çº§åˆ°2.xï¼Œä¸ç„¶è¿ä¸ä¸Šã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel asciidoc</span><br><span class="line">yum install  gcc perl-ExtUtils-MakeMaker</span><br><span class="line">yum remove git</span><br><span class="line"><span class="built_in">cd</span> /usr/local/src/</span><br><span class="line">wget https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.26.0.tar.xz</span><br><span class="line">tar -xvf git-2.26.0.tar.xz</span><br><span class="line"><span class="built_in">cd</span> git-2.26.0/</span><br><span class="line">make prefix=/usr/local/git all</span><br><span class="line">make prefix=/usr/local/git install</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;export PATH=<span class="variable">$PATH</span>:/usr/local/git/bin&quot;</span> &gt;&gt; /etc/profile</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç‰ˆæœ¬</span></span><br><span class="line">git --version</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.åœ¨æœ¬åœ°çš„vscodeæ‰©å±•ä¸­æœç´¢<code>Remote Development</code>, ç‚¹å‡»å®‰è£…ï¼Œè¿™ä¸ªæ’ä»¶ä¼šè‡ªåŠ¨å®‰è£…å…¶ä»–ä¾èµ–æ’ä»¶ã€‚</p><p><img src="/../img/20200505/3.png"></p><p>3.è¿˜æ˜¯åœ¨vscodeä¸­ï¼Œé…ç½®<code>Remote-SSH</code>ã€‚å¿«æ·é”®<code>ctrl+shift+p</code>ï¼Œåœ¨æœç´¢æ¡†ä¸­æœç´¢ï¼š<code>Remote-SSH:Settings</code>, æ‰¾åˆ°<code>Remote-SSH: Show Login Terminal</code>ï¼Œç„¶åå‹¾é€‰<code>Always reveal the SSH login terminal</code>ï¼Œä¿å­˜å…³é—­ã€‚</p><p><img src="/../img/20200505/6.png"></p><p>4.è¿˜æ˜¯åœ¨vscodeä¸­ï¼Œç‚¹å‡»å·¦ä¸‹è§’çš„è¿œç¨‹çª—å£æŒ‰é’®ï¼Œç‚¹å‡»<code>open configuration file</code>, å¼¹å‡ºäº†å‡ ä¸ªé…ç½®æ–‡ä»¶ï¼Œé€‰ç¬¬ä¸€ä¸ªç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹çš„configæ–‡ä»¶ã€‚</p><p><img src="/../img/20200505/4.png"></p><p><img src="/../img/20200505/2.png"></p><p>5.æ‰“å¼€åç¼–è¾‘å¦‚ä¸‹ä¿¡æ¯ï¼Œç¼–è¾‘å®Œæˆä¹‹åä¿å­˜å…³é—­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Read more about SSH config files: https://linux.die.net/man/5/ssh_config</span></span><br><span class="line">Host è¿™é‡Œå¡«è‡ªå®šä¹‰çš„åå­—</span><br><span class="line">    HostName è¿™é‡Œå¡«è¿œç¨‹æœåŠ¡å™¨çš„IPåœ°å€</span><br><span class="line">    User è¿™é‡Œå¡«ç™»å½•ç”¨æˆ·å</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>6.ç„¶åå°±å¯ä»¥åœ¨å·¦ä¾§çš„è¿œç¨‹èµ„æºç®¡ç†å™¨çš„SSH Targetsé€‰é¡¹ä¸­çœ‹åˆ°åˆšæ‰çš„é…ç½®å¥½çš„ä¸»æœºï¼Œå³é”®è¿æ¥ï¼Œè¾“å…¥å¯†ç ç™»å½•ï¼Œå®Œæˆã€‚</p><p><img src="/../img/20200505/5.png"></p>]]></content>
      
      
      <categories>
          
          <category> å¤‡å¿˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
